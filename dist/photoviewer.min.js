/*!
 *     ____  __  ______  __________ _    _____________       ____________
 *    / __ \/ / / / __ \/_  __/ __ \ |  / /  _/ ____/ |     / / ____/ __ \
 *   / /_/ / /_/ / / / / / / / / / / | / // // __/  | | /| / / __/ / /_/ /
 *  / ____/ __  / /_/ / / / / /_/ /| |/ // // /___  | |/ |/ / /___/ _, _/
 * /_/   /_/ /_/\____/ /_/  \____/ |___/___/_____/  |__/|__/_____/_/ |_|
 *
 * photoviewer - v3.11.1
 * A JS plugin to view images just like in Windows.
 * https://nzbin.github.io/photoviewer/
 *
 * Copyright (c) 2018-present nzbin
 * Released under MIT License
 */
((t,e)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).PhotoViewer=e()})(this,function(){function A(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,O(n.key),n)}}function o(t,e,i){(e=O(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}function O(t){t=((t,e)=>{if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===e?String:Number)(t);if("object"!=typeof(i=i.call(t,e||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string");return"symbol"==typeof t?t:t+""}var _=function(t,e){return new _.fn.init(t,e)},w=window.document,n=[],I=n.concat,F=n.filter,y=n.slice,j={},e={},B={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},N=/^\s*<(\w+|!)[^>]*>/,Y=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,X=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,q=/^(?:body|html)$/i,W=["val","css","html","text","data","width","height","offset"],t=w.createElement("table"),Z=w.createElement("tr"),U={tr:w.createElement("tbody"),tbody:t,thead:t,tfoot:t,td:Z,th:Z,"*":w.createElement("div")},K=/^[\w-]*$/,Q={},G=Q.toString,J=w.createElement("div"),l=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},b=w.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e=e&&e.parentNode;)if(e===t)return!0;return!1};function h(t){return null==t?String(t):Q[G.call(t)]||"object"}function s(t){return"string"==typeof t}function c(t){return"function"==h(t)}function a(t){return null!=t&&t==t.window}function tt(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function r(t){return"object"==h(t)}function u(t){return r(t)&&!a(t)&&Object.getPrototypeOf(t)==Object.prototype}function et(t){var e=!!t&&"length"in t&&t.length,i=h(t);return"function"!=i&&!a(t)&&("array"==i||0===e||"number"==typeof e&&0<e&&e-1 in t)}function d(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function it(t,e){return"number"!=typeof e||B[d(t)]?e:e+"px"}function nt(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})}function ot(t){return t in e?e[t]:e[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function f(t){return t instanceof _}function p(t,e,i,n){return c(e)?e.call(t,i,n):e}function st(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function g(t,e){var i=t.className||"",n=i&&void 0!==i.baseVal;if(void 0===e)return n?i.baseVal:i;n?i.baseVal=e:t.className=e}function at(t,e){var i={width:["padding-left","padding-right","border-left-width","border-right-width"],height:["padding-top","padding-bottom","border-top-width","border-bottom-width"]};return"border-box"!==t.css("box-sizing")||0<window.navigator.userAgent.indexOf("MSIE ")||navigator.userAgent.match(/Trident.*rv:11\./)?parseFloat(t.css(e)):parseFloat(t.css(e))-parseFloat(t.css(i[e][0]))-parseFloat(t.css(i[e][1]))-parseFloat(t.css(i[e][2]))-parseFloat(t.css(i[e][3]))}function rt(e,i){var t=e.replace(/./,function(t){return t[0].toUpperCase()}),n=this[0];return void 0===i?a(n)?n.document.documentElement["client"+t]:tt(n)?n.documentElement["scroll"+t]:at(this,e):this.each(function(t){(n=_(this)).css(e,p(this,i,t,n[e]()))})}_.fn=_.prototype={constuctor:_,length:0,forEach:n.forEach,reduce:n.reduce,push:n.push,sort:n.sort,splice:n.splice,indexOf:n.indexOf,init:function(t,e){var i,n;if(!t)return this;if("string"==typeof t)if("<"==(t=t.trim())[0]&&N.test(t))i=_.fragment(t,RegExp.$1,e),t=null;else{if(void 0!==e)return _(e).find(t);i=_.qsa(w,t)}else{if(c(t))return _(w).ready(t);if(f(t))return t;if(l(t))n=t,i=F.call(n,function(t){return null!=t});else if(r(t))i=[t],t=null;else{if(void 0!==e)return _(e).find(t);i=_.qsa(w,t)}}return _.makeArray(i,t,this)},concat:function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=f(t=arguments[i])?t.toArray():t;return I.apply(f(this)?this.toArray():this,e)},pluck:function(e){return _.map(this,function(t){return t[e]})},toArray:function(){return this.get()},get:function(t){return void 0===t?y.call(this):this[0<=t?t:t+this.length]},size:function(){return this.length},each:function(i){return n.every.call(this,function(t,e){return!1!==i.call(t,e,t)}),this},map:function(i){return _(_.map(this,function(t,e){return i.call(t,e,t)}))},slice:function(){return _(y.apply(this,arguments))},first:function(){var t=this[0];return t&&!r(t)?t:_(t)},last:function(){var t=this[this.length-1];return t&&!r(t)?t:_(t)},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)}},_.extend=_.fn.extend=function(){var t,e,i,n,o,s=arguments[0]||{},a=1,r=arguments.length,h=!1;for("boolean"==typeof s&&(h=s,s=arguments[a]||{},a++),"object"==typeof s||c(s)||(s={}),a===r&&(s=this,a--);a<r;a++)if(null!=(t=arguments[a]))for(e in t)o=s[e],s!==(i=t[e])&&(h&&i&&(u(i)||(n=l(i)))?(o=n?(n=!1,o&&l(o)?o:[]):o&&u(o)?o:{},s[e]=_.extend(h,o,i)):void 0!==i&&(s[e]=i));return s},_.extend({makeArray:function(t,e,i){for(var n=t?t.length:0,o=0;o<n;o++)i[o]=t[o];return i.length=n,i.selector=e||"",i},merge:function(t,e){for(var i=+e.length,n=0,o=t.length;n<i;n++)t[o++]=e[n];return t.length=o,t},qsa:function(t,e){var i,n="#"==e[0],o=!n&&"."==e[0],s=n||o?e.slice(1):e,a=K.test(s);return t.getElementById&&a&&n?(i=t.getElementById(s))?[i]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:y.call(a&&!n&&t.getElementsByClassName?o?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))},fragment:function(t,e,i){var n,o,s;return(n=Y.test(t)?_(w.createElement(RegExp.$1)):n)||(t.replace&&(t=t.replace(X,"<$1></$2>")),void 0===e&&(e=N.test(t)&&RegExp.$1),(s=U[e=e in U?e:"*"]).innerHTML=""+t,n=_.each(y.call(s.childNodes),function(){s.removeChild(this)})),u(i)&&(o=_(n),_.each(i,function(t,e){-1<W.indexOf(t)?o[t](e):o.attr(t,e)})),n},matches:function(t,e){var i,n;return!(!e||!t||1!==t.nodeType)&&((i=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector)?i.call(t,e):((n=!(i=t.parentNode))&&(i=J).appendChild(t),i=~_.qsa(i,e).indexOf(t),n&&J.removeChild(t),i))},each:function(t,e){var i,n;if(et(t)){for(i=0;i<t.length;i++)if(!1===e.call(t[i],i,t[i]))return t}else for(n in t)if(!1===e.call(t[n],n,t[n]))return t;return t},map:function(t,e){var i,n,o,s,a=[];if(et(t))for(n=0;n<t.length;n++)null!=(i=e(t[n],n))&&a.push(i);else for(o in t)null!=(i=e(t[o],o))&&a.push(i);return 0<(s=a).length?_.fn.concat.apply([],s):s}}),_.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Q["[object "+e+"]"]=e.toLowerCase()}),_.fn.init.prototype=_.fn;var ht=1,x={},lt="onfocusin"in window,ct={focus:"focusin",blur:"focusout"},ut={mouseenter:"mouseover",mouseleave:"mouseout"},dt=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,ft=function(){return!0},pt=function(){return!1},gt={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function z(t){return t._zid||(t._zid=ht++)}function mt(n,o){if(o||!n.isDefaultPrevented){o=o||n,_.each(gt,function(t,e){var i=o[t];n[t]=function(){return this[e]=ft,i&&i.apply(o,arguments)},n[e]=pt});try{n.timeStamp||(n.timeStamp=Date.now())}catch(t){console.warn(t)}(void 0!==o.defaultPrevented?o.defaultPrevented:"returnValue"in o?!1===o.returnValue:o.getPreventDefault&&o.getPreventDefault())&&(n.isDefaultPrevented=ft)}return n}function vt(t){t=(""+t).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function wt(t,e,i,n){var o,s;return(e=vt(e)).ns&&(s=e.ns,o=new RegExp("(?:^| )"+s.replace(" "," .* ?")+"(?: |$)")),(x[z(t)]||[]).filter(function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||o.test(t.ns))&&(!i||z(t.fn)===z(i))&&(!n||t.sel==n)})}function yt(t,e){return t.del&&!lt&&t.e in ct||!!e}function bt(t){return ut[t]||lt&&ct[t]||t}function xt(e,t,i,n,o){var s=z(e);(t||"").split(/\s/).forEach(function(t){wt(e,t,i,n).forEach(function(t){delete x[s][t.i],"removeEventListener"in e&&e.removeEventListener(bt(t.e),t.proxy,yt(t,o))})})}function zt(t,e,n,o){var i,s,a=_.map(e,function(t){var e=[];return"array"==(i=h(t))?(t.forEach(function(t){return void 0!==t.nodeType?e.push(t):f(t)?e=e.concat(t.get()):void(e=e.concat(_.fragment(t)))}),e):"object"==i||null==t?t:_.fragment(t)}),r=1<t.length;return a.length<1?t:t.each(function(t,e){s=o?e:e.parentNode;var i=b(w.documentElement,s);a.forEach(function(t){if(r)t=t.cloneNode(!0);else if(!s)return _(t).remove();n.call(e,t),i&&function t(e,i){i(e);for(var n=0,o=e.childNodes.length;n<o;n++)t(e.childNodes[n],i)}(t,function(t){var e;null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||(e=t.ownerDocument?t.ownerDocument.defaultView:window).eval.call(e,t.innerHTML)})})})}var i,m="",v=w.createElement("div"),t=v.style.transitionProperty;function Mt(t){return i?i+t:t.toLowerCase()}void 0===v.style.transform&&_.each({Webkit:"webkit",Moz:"",O:"o"},function(t,e){if(void 0!==v.style[t+"TransitionProperty"])return m="-"+t.toLowerCase()+"-",i=e,!1}),v=null,_.fx={off:void 0===i&&void 0===t,speeds:{_default:400,fast:200,slow:600},cssPrefix:m,transitionEnd:Mt("TransitionEnd"),animationEnd:Mt("AnimationEnd")};var $t,Tt,Ct,Lt,_t,Et,Vt,Ht,kt,Dt=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,M={};function Pt(){return this.each(function(){var t,e,i;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(t=this.nodeName,j[t]||(e=w.createElement(t),w.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),j[t]=i="none"==i?"block":i),j[t]))})}function Rt(){return this.css("display","none")}function St(t,e,i,n,o){"function"!=typeof e||o||(o=e,e=void 0);i={opacity:i};return n&&(i.scale=n,t.css(_.fx.cssPrefix+"transform-origin","0 0")),t.animate(i,e,null,o)}$t=m+"transform",M[Tt=m+"transition-property"]=M[Ct=m+"transition-duration"]=M[_t=m+"transition-delay"]=M[Lt=m+"transition-timing-function"]=M[Et=m+"animation-name"]=M[Vt=m+"animation-duration"]=M[kt=m+"animation-delay"]=M[Ht=m+"animation-timing-function"]="";var Z={find:function(t){var i=this,e=t?"object"==typeof t?_(t).filter(function(){var e=this;return n.some.call(i,function(t){return b(t,e)})}):1==this.length?_(_.qsa(this[0],t)):this.map(function(){return _.qsa(this,t)}):_();return e},closest:function(i,n){var o=[],s="object"==typeof i&&_(i);return this.each(function(t,e){for(;e&&!(s?0<=s.indexOf(e):_.matches(e,i));)e=e!==n&&!tt(e)&&e.parentNode;e&&o.indexOf(e)<0&&o.push(e)}),_(o)},css:function(t,e){if(arguments.length<2){var i,n,o=this[0];if("string"==typeof t)return o?o.style[nt(t)]||getComputedStyle(o,"").getPropertyValue(t):void 0;if(l(t))return o?(i={},n=getComputedStyle(o,""),_.each(t,function(t,e){i[e]=o.style[nt(e)]||n.getPropertyValue(e)}),i):void 0}var s="";if("string"==h(t))e||0===e?s=d(t)+":"+it(t,e):this.each(function(){this.style.removeProperty(d(t))});else for(var a in t)t[a]||0===t[a]?s+=d(a)+":"+it(a,t[a])+";":this.each(function(){this.style.removeProperty(d(a))});return this.each(function(){this.style.cssText+=";"+s})},addClass:function(i){var n=[];return i?this.each(function(t){var e;"className"in this&&(n=[],e=g(this),p(this,i,t,e).split(/\s+/g).forEach(function(t){_(this).hasClass(t)||n.push(t)},this),n.length)&&g(this,e+(e?" ":"")+n.join(" "))}):this},hasClass:function(t){return!!t&&n.some.call(this,function(t){return this.test(g(t))},ot(t))},removeClass:function(e){var i=[];return this.each(function(t){if("className"in this){if(void 0===e)return g(this,"");i=g(this),p(this,e,t,i).split(/\s+/g).forEach(function(t){i=i.replace(ot(t)," ")}),g(this,i.trim())}})},attr:function(i,n){var t;return"string"!=typeof i||1 in arguments?this.each(function(t){if(1===this.nodeType)if(r(i))for(var e in i)st(this,e,i[e]);else st(this,i,p(this,n,t,this.getAttribute(i)))}):0 in this&&1==this[0].nodeType&&null!=(t=this[0].getAttribute(i))?t:void 0},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){st(this,t)},this)})},append:function(){return zt(this,arguments,function(t){this.insertBefore(t,null)},!0)},remove:function(){return this.each(function(){if(1===this.nodeType){r=void 0!==(o=this).getElementsByTagName?o.getElementsByTagName(s||"*"):void 0!==o.querySelectorAll?o.querySelectorAll(s||"*"):[];for(var t,i,e=void 0===s||s&&(s=s,(a=o).nodeName)&&a.nodeName.toLowerCase()===s.toLowerCase()?_.merge([o],r):r,n=0;void 0!==(i=e[n]);n++)i._zid&&(t=x[i._zid])&&t.forEach(t=>{var e=t.e+"."+t.ns.split(" ").join(".");xt(i,e,t.fn,t.sel)})}var o,s,a,r;null!=this.parentNode&&this.parentNode.removeChild(this)})},empty:function(){return this.each(function(){this.innerHTML=""})},html:function(i){return 0 in arguments?this.each(function(t){var e=this.innerHTML;_(this).empty().append(p(this,i,t,e))}):0 in this?this[0].innerHTML:null},width:function(t){return rt.call(this,"width",t)},height:function(t){return rt.call(this,"height",t)},scrollTop:function(t){var e;if(this.length)return e="scrollTop"in this[0],void 0===t?e?this[0].scrollTop:(a(this[0])?this[0]:this[0].defaultView).pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})},scrollLeft:function(t){var e;if(this.length)return e="scrollLeft"in this[0],void 0===t?e?this[0].scrollLeft:(a(this[0])?this[0]:this[0].defaultView).pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})},offset:function(n){var t;return n?this.each(function(t){var e=_(this),t=p(this,n,t,e.offset()),i=e.offsetParent().offset(),t={top:t.top-i.top,left:t.left-i.left};"static"==e.css("position")&&(t.position="relative"),e.css(t)}):this.length?w.documentElement===this[0]||b(w.documentElement,this[0])?{left:(t=this[0].getBoundingClientRect()).left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}:{top:0,left:0}:null},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||w.body;t&&!q.test(t.nodeName)&&"static"==_(t).css("position");)t=t.offsetParent;return t})},position:function(){var t,e,i,n;if(this.length)return t=this[0],i=this.offsetParent(),n=q.test(i[0].nodeName)?{top:0,left:0}:i.offset(),"fixed"===_(t).css("position")?e=t.getBoundingClientRect():(e=this.offset(),n.top+=parseFloat(_(i[0]).css("border-top-width"))||0,n.left+=parseFloat(_(i[0]).css("border-left-width"))||0),{top:e.top-n.top-parseFloat(_(t).css("margin-top"))||0,left:e.left-n.left-parseFloat(_(t).css("margin-left"))||0}},on:function(u,d,f,p,g){var m,v,i=this;return u&&!s(u)?(_.each(u,function(t,e){i.on(t,d,f,e,g)}),i):(s(d)||c(p)||!1===p||(p=f,f=d,d=void 0),void 0!==p&&!1!==f||(p=f,f=void 0),!1===p&&(p=pt),i.each(function(t,i){var n,e,o,s,a,r,h,l,c;g&&(m=function(t){return xt(i,t.type,p),p.apply(this,arguments)}),e=u,o=p,s=f,r=(v=(a=d)?function(t){var e=_(t.target).closest(d,i).get(0);if(e&&e!==i)return t=_.extend((t=>{var e,i={originalEvent:t};for(e in t)dt.test(e)||void 0===t[e]||(i[e]=t[e]);return mt(i,t)})(t),{currentTarget:e,liveFired:i}),(m||p).apply(e,[t].concat(y.call(arguments,1)))}:v)||m,l=z(n=i),c=x[l]||(x[l]=[]),e.split(/\s/).forEach(function(t){if("ready"==t)return _(w).ready(o);var e=vt(t),i=(e.fn=o,e.sel=a,e.e in ut&&(o=function(t){t=t.relatedTarget;if(!t||t!==this&&!b(this,t))return e.fn.apply(this,arguments)}),(e.del=r)||o);e.proxy=function(t){var e;if(!(t=mt(t)).isImmediatePropagationStopped())return t.data=s,!1===(e=i.apply(n,null==t._args?[t]:[t].concat(t._args)))&&(t.preventDefault(),t.stopPropagation()),e},e.i=c.length,c.push(e),"addEventListener"in n&&n.addEventListener(bt(e.e),e.proxy,yt(e,h))})}))},off:function(t,i,e){var n=this;return t&&!s(t)?(_.each(t,function(t,e){n.off(t,i,e)}),n):(s(i)||c(e)||!1===e||(e=i,i=void 0),!1===e&&(e=pt),n.each(function(){xt(this,t,e,i)}))},show:function(t,e){return Pt.call(this),void 0===t?t=0:this.css("opacity",0),St(this,t,1,"1,1",e)},hide:function(t,e){return void 0===t?Rt.call(this):(i=e,St(this,t,0,"0,0",function(){Rt.call(_(this)),i&&i.call(this)}));var i},anim:function(t,e,i,n,o){var s,a,r,h={},l="",c=this,u=_.fx.transitionEnd,d=!1;if(void 0===e&&(e=_.fx.speeds._default/1e3),void 0===o&&(o=0),_.fx.off&&(e=0),"string"==typeof t)h[Et]=t,h[Vt]=e+"s",h[kt]=o+"s",h[Ht]=i||"linear",u=_.fx.animationEnd;else{for(s in a=[],t)Dt.test(s)?l+=s+"("+t[s]+") ":(h[s]=t[s],a.push(s.replace(/([A-Z])/g,"-$1").toLowerCase()));l&&(h[$t]=l,a.push($t)),0<e&&"object"==typeof t&&(h[Tt]=a.join(", "),h[Ct]=e+"s",h[_t]=o+"s",h[Lt]=i||"linear")}return r=function(t){if(void 0!==t){if(t.target!==t.currentTarget)return;_(t.target).off(u,r)}else _(this).off(u,r);d=!0,_(this).css(M),n&&n.call(this)},0<e&&(this.on(u,r),setTimeout(function(){d||r.call(c)},1e3*(e+o)+25)),this.size()&&this.get(0).clientLeft,this.css(h),e<=0&&setTimeout(function(){c.each(function(){r.call(this)})},0),this},animate:function(t,e,i,n,o){return c(e)&&(n=e,e=i=void 0),c(i)&&(n=i,i=void 0),u(e)&&(i=e.easing,n=e.complete,o=e.delay,e=e.duration),e=e&&("number"==typeof e?e:_.fx.speeds[e]||_.fx.speeds._default)/1e3,o=o&&parseFloat(o)/1e3,this.anim(t,e,i,n,o)},fadeTo:function(t,e,i){return St(this,t,e,null,i)},fadeIn:function(t,e){var i=this.css("opacity");return 0<i?this.css("opacity",0):i=1,Pt.call(this).fadeTo(t,i,e)}},At=(_.extend({isPlainObject:u,isArray:l,isFunction:c,noop:function(){}}),_.fn.extend(Z),{draggable:!0,resizable:!0,movable:!0,keyboard:!0,title:!0,modalWidth:320,modalHeight:320,fixedModalSize:!1,initMaximized:!1,gapThreshold:.02,ratioThreshold:.1,minRatio:.05,maxRatio:16,headerToolbar:["maximize","close"],footerToolbar:["zoomIn","zoomOut","prev","fullscreen","next","actualSize","rotateRight"],icons:{minimize:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M20,14H4V10H20"></path>\n      </svg>',maximize:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M4,4H20V20H4V4M6,8V18H18V8H6Z"></path>\n      </svg>',close:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M13.46,12L19,17.54V19H17.54L12,13.46L6.46,19H5V17.54L10.54,12\n        L5,6.46V5H6.46L12,10.54L17.54,5H19V6.46L13.46,12Z"></path>\n      </svg>',zoomIn:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M15.5,14L20.5,19L19,20.5L14,15.5V14.71L13.73,14.43\n        C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3A6.5,6.5 0 0,1 16,9.5\n        C16,11.11 15.41,12.59 14.43,13.73L14.71,14H15.5M9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5\n        C7,5 5,7 5,9.5C5,12 7,14 9.5,14M12,10H10V12H9V10H7V9H9V7H10V9H12V10Z"></path>\n      </svg>',zoomOut:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M15.5,14H14.71L14.43,13.73C15.41,12.59 16,11.11 16,9.5\n        A6.5,6.5 0 0,0 9.5,3A6.5,6.5 0 0,0 3,9.5A6.5,6.5 0 0,0 9.5,16\n        C11.11,16 12.59,15.41 13.73,14.43L14,14.71V15.5L19,20.5L20.5,19L15.5,14M9.5,14\n        C7,14 5,12 5,9.5C5,7 7,5 9.5,5C12,5 14,7 14,9.5C14,12 12,14 9.5,14M7,9H12V10H7V9Z"></path>\n      </svg>',prev:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M6,18V6H8V18H6M9.5,12L18,6V18L9.5,12Z"></path>\n      </svg>',next:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M16,18H18V6H16M6,18L14.5,12L6,6V18Z"></path>\n      </svg>',fullscreen:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M8.5,12.5L11,15.5L14.5,11L19,17H5M23,18V6A2,2 0 0,0 21,4H3\n        A2,2 0 0,0 1,6V18A2,2 0 0,0 3,20H21A2,2 0 0,0 23,18Z"></path>\n      </svg>',actualSize:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M9.5,13.09L10.91,14.5L6.41,19H10V21H3V14H5V17.59L9.5,13.09\n        M10.91,9.5L9.5,10.91L5,6.41V10H3V3H10V5H6.41L10.91,9.5M14.5,13.09L19,17.59V14H21V21H14V19\n        H17.59L13.09,14.5L14.5,13.09M13.09,9.5L17.59,5H14V3H21V10H19V6.41L14.5,10.91\n        L13.09,9.5Z"></path>\n      </svg>',rotateLeft:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M13,4.07V1L8.45,5.55L13,10V6.09C15.84,6.57 18,9.03 18,12\n        C18,14.97 15.84,17.43 13,17.91V19.93C16.95,19.44 20,16.08 20,12C20,7.92 16.95,4.56 13,4.07\n        M7.1,18.32C8.26,19.22 9.61,19.76 11,19.93V17.9C10.13,17.75 9.29,17.41 8.54,16.87L7.1,18.32\n        M6.09,13H4.07C4.24,14.39 4.79,15.73 5.69,16.89L7.1,15.47C6.58,14.72 6.23,13.88 6.09,13\n        M7.11,8.53L5.7,7.11C4.8,8.27 4.24,9.61 4.07,11H6.09C6.23,10.13 6.58,9.28 7.11,8.53Z"></path>\n      </svg>',rotateRight:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M16.89,15.5L18.31,16.89C19.21,15.73 19.76,14.39 19.93,13H17.91\n        C17.77,13.87 17.43,14.72 16.89,15.5M13,17.9V19.92C14.39,19.75 15.74,19.21 16.9,18.31\n        L15.46,16.87C14.71,17.41 13.87,17.76 13,17.9M19.93,11C19.76,9.61 19.21,8.27 18.31,7.11\n        L16.89,8.53C17.43,9.28 17.77,10.13 17.91,11M15.55,5.55L11,1V4.07C7.06,4.56 4,7.92 4,12\n        C4,16.08 7.05,19.44 11,19.93V17.91C8.16,17.43 6,14.97 6,12C6,9.03 8.16,6.57 11,6.09V10\n        L15.55,5.55Z"></path>\n      </svg>'},i18n:{minimize:"Minimize",maximize:"Maximize (Alt+X)",close:"Close (Q)",zoomIn:"Zoom-in (+)",zoomOut:"Zoom-out (-)",prev:"Prev (←)",next:"Next (→)",fullscreen:"Fullscreen (F)",actualSize:"Actual-size (Ctrl+Alt+0)",rotateLeft:"Rotate-left (Ctrl+,)",rotateRight:"Rotate-right (Ctrl+.)"},multiInstances:!0,initAnimation:!0,animationDuration:400,animationEasing:"ease-in-out",fixedModalPos:!1,zIndex:1100,dragHandle:null,callbacks:{beforeOpen:_.noop,opened:_.noop,beforeClose:_.noop,closed:_.noop,beforeChange:_.noop,changed:_.noop},index:0,progressiveLoading:!0,appendTo:"body",customButtons:{},positionFixed:!0,initModalPos:null,errorMsg:""}),Ot=window.document;function It(t,e,i,n){var o=n?t.h:t.w,n=n?t.w:t.h;(n>e.h||o>e.w)&&i.addClass("is-grab"),n<=e.h&&o<=e.w&&i.removeClass("is-grab")}function Ft(){return"ontouchstart"in window||window.DocumentTouch&&Ot instanceof window.DocumentTouch}function $(t){return/^(?:body|html)$/i.test(t.nodeName)}function T(i,t){return t.reduce(function(t,e){return t+parseFloat(i.css(e))},0)}function E(t){return"border-box"===t.css("box-sizing")}function jt(t,e,i,n,o){return o?Math.min(i/e,n/t,1):Math.min(i/t,n/e,1)}var C=_(window),V=_(Ot),L="click",Bt=Ft()?"touchstart":"mousedown",H=Ft()?"touchmove":"mousemove",k=Ft()?"touchend":"mouseup",D="photoviewer",P="."+D,R="."+D,S={isMoving:!1,isResizing:!1};var Nt="html, body, .".concat(D,"-modal, .").concat(D,"-stage, .").concat(D,"-button, .").concat(D,"-resizable-handle");var Yt="html, body, .".concat(D,"-modal, .").concat(D,"-stage, .").concat(D,"-button"),Xt={n:"ns",s:"ns",e:"ew",w:"ew",nw:"nwse",se:"nwse",ne:"nesw",sw:"nesw"};t=(()=>{function n(t,e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");o(this,"isOpened",!1),o(this,"isMaximized",!1),o(this,"isRotated",!1),o(this,"rotationDegree",0),o(this,"imageData",{}),o(this,"modalData",{width:null,height:null,left:null,top:null}),o(this,"prevIndex",null),o(this,"_lastTimestamp",0),o(this,"zIndex",1),this.init(t,e)}return t=n,(e=[{key:"init",value:function(t,e){this.options=_.extend(!0,{},At,e),e&&_.isArray(e.footerToolbar)&&(this.options.footerToolbar=e.footerToolbar),e&&_.isArray(e.headerToolbar)&&(this.options.headerToolbar=e.headerToolbar),this.open(),this._bringToFront(),this.images=t,this.index=this.options.index,this._loadImage(this.index),this.options.draggable&&this.draggable(this.$photoviewer,this.dragHandle,P+"-button"),this.options.movable&&this.movable(this.$stage,this.$image),this.options.resizable&&this.resizable(this.$photoviewer,this.$stage,this.$image)}},{key:"_createBtns",value:function(t){var n=this,o=["minimize","maximize","close","zoomIn","zoomOut","prev","next","fullscreen","actualSize","rotateLeft","rotateRight"],s="";return _.each(t,function(t,e){var i="".concat(D,"-button ").concat(D,"-button-").concat(e);0<=o.indexOf(e)?s+='<button class="'.concat(i,'" title="').concat(n.options.i18n[e],'">\n            ').concat(n.options.icons[e],"\n          </button>"):n.options.customButtons[e]&&(s+='<button class="'.concat(i,'" title="').concat(n.options.customButtons[e].title||"",'">\n            ').concat(n.options.customButtons[e].text,"\n          </button>"))}),s}},{key:"_createTitle",value:function(){return this.options.title?'<div class="'.concat(D,'-title"></div>'):""}},{key:"_createTemplate",value:function(){return'<div class="'.concat(D,'-modal" tabindex="0" role="dialog">\n        <div class="').concat(D,'-inner">\n          <div class="').concat(D,'-header">\n            <div class="').concat(D,"-toolbar ").concat(D,'-toolbar-header">\n              ').concat(this._createBtns(this.options.headerToolbar),"\n            </div>\n            ").concat(this._createTitle(),'\n          </div>\n          <div class="').concat(D,'-stage">\n            <img class="').concat(D,'-image" src="" alt="" />\n          </div>\n          <div class="').concat(D,'-footer">\n            <div class="').concat(D,"-toolbar ").concat(D,'-toolbar-footer">\n              ').concat(this._createBtns(this.options.footerToolbar),"\n            </div>\n          </div>\n        </div>\n      </div>").replace(/>\s+</g,"><")}},{key:"_build",value:function(){var t=this._createTemplate(),t=_(t);this.$photoviewer=t,this.$stage=t.find(P+"-stage"),this.$title=t.find(P+"-title"),this.$image=t.find(P+"-image"),this.$close=t.find(P+"-button-close"),this.$maximize=t.find(P+"-button-maximize"),this.$minimize=t.find(P+"-button-minimize"),this.$zoomIn=t.find(P+"-button-zoomIn"),this.$zoomOut=t.find(P+"-button-zoomOut"),this.$actualSize=t.find(P+"-button-actualSize"),this.$fullscreen=t.find(P+"-button-fullscreen"),this.$rotateLeft=t.find(P+"-button-rotateLeft"),this.$rotateRight=t.find(P+"-button-rotateRight"),this.$prev=t.find(P+"-button-prev"),this.$next=t.find(P+"-button-next"),this.options.positionFixed&&this.$photoviewer.css({position:"fixed"}),this.options.dragHandle&&this.options.dragHandle!==P+"-modal"?this.dragHandle=this.$photoviewer.find(this.options.dragHandle):this.dragHandle=this.$photoviewer,_(this.options.appendTo).eq(0).append(this.$photoviewer),this._stageEdgeValue={horizontal:T(this.$stage,["left","right","border-left-width","border-right-width"]),vertical:T(this.$stage,["top","bottom","border-top-width","border-bottom-width"])},this._modalEdgeValue={horizontal:T(this.$photoviewer,["padding-left","padding-right","border-left-width","border-right-width"]),vertical:T(this.$photoviewer,["padding-top","padding-bottom","border-top-width","border-bottom-width"])},this._addEvents(),this._addCustomButtonEvents()}},{key:"open",value:function(){this._triggerHook("beforeOpen",this),!this.options.multiInstances&&0<n.instances.length&&n.instances[0].close(),this._build(),this._setInitModalPos(),n.instances.push(this),this._triggerHook("opened",this)}},{key:"close",value:function(){var e=this;this._triggerHook("beforeClose",this),this.$photoviewer.remove(),0===(n.instances=n.instances.filter(function(t){return t!==e})).length&&C.off("resize"+R),this._triggerHook("closed",this)}},{key:"_getOffsetParentData",value:function(){var t=_(this.options.appendTo)[0];return{width:this.options.positionFixed||$(t)?C.width():t.clientWidth,height:this.options.positionFixed||$(t)?C.height():t.clientHeight,scrollLeft:this.options.positionFixed?0:$(t)?V.scrollLeft():t.scrollLeft,scrollTop:this.options.positionFixed?0:$(t)?V.scrollTop():t.scrollTop}}},{key:"_setModalToCenter",value:function(){var t,e,i,n,o,s=0,a=0,s=(E(this.$photoviewer)||(s+=this._modalEdgeValue.horizontal,a+=this._modalEdgeValue.vertical),_.isPlainObject(this.options.initModalPos)?(n=this.options.initModalPos.left,o=this.options.initModalPos.top,t=this.options.initModalPos.right,e=this.options.initModalPos.bottom):(n=((i=this._getOffsetParentData()).width-this.options.modalWidth-s)/2+i.scrollLeft,o=(i.height-this.options.modalHeight-a)/2+i.scrollTop),{width:this.modalData.width||this.options.modalWidth,height:this.modalData.height||this.options.modalHeight,left:this.modalData.left||n,top:this.modalData.top||o,right:this.modalData.right||t,bottom:this.modalData.bottom||e});this.$photoviewer.css(s)}},{key:"_setInitModalPos",value:function(){this.options.initMaximized?(this.maximize(),this.isOpened=!0):this._setModalToCenter(),this.$photoviewer[0].focus()}},{key:"_setModalSize",value:function(){var t,e,i,n,o=this,s=this._getOffsetParentData(),a=Math.max(this.options.gapThreshold,0)+1,r=this._stageEdgeValue.horizontal+this._modalEdgeValue.horizontal,h=this._stageEdgeValue.vertical+this._modalEdgeValue.vertical,r=Math.min((s.width/a-r)/this.imageData.originalWidth,(s.height/a-h)/this.imageData.originalHeight,1),a=0,h=0,l=0,c=0,a=(E(this.$photoviewer)?(a+=this._modalEdgeValue.horizontal,h+=this._modalEdgeValue.vertical):(l+=this._modalEdgeValue.horizontal,c+=this._modalEdgeValue.vertical),Math.max(this.imageData.originalWidth*r+this._stageEdgeValue.horizontal+a,this.options.modalWidth)),r=Math.max(this.imageData.originalHeight*r+this._stageEdgeValue.vertical+h,this.options.modalHeight),a=this.options.fixedModalSize?this.options.modalWidth:Math.round(a),r=this.options.fixedModalSize?this.options.modalHeight:Math.round(r),h=(_.isPlainObject(this.options.initModalPos)?(t=this.options.initModalPos.left,e=this.options.initModalPos.top,i=this.options.initModalPos.right,n=this.options.initModalPos.bottom):(t=(s.width-a-l)/2+s.scrollLeft,e=(s.height-r-c)/2+s.scrollTop),{width:a,height:r,left:t,top:e,right:i,bottom:n});this.options.initAnimation?this.$photoviewer.animate(h,this.options.animationDuration,this.options.animationEasing,function(){o._setImageSize()}):(this.$photoviewer.css(h),this._setImageSize()),this.isOpened=!0}},{key:"_setImageSize",value:function(){var t=this.$stage.width(),e=this.$stage.height(),i=this.imageData,n=i.originalWidth,i=i.originalHeight,o=jt(n,i,t,e,this.isRotated),n=n*o,i=i*o;this.$image.css({width:Math.round(n),height:Math.round(i),left:(t-Math.round(n))/2,top:(e-Math.round(i))/2}),_.extend(this.imageData,{initWidth:n,initHeight:i,initLeft:(t-n)/2,initTop:(e-i)/2,width:n,height:i,left:(t-n)/2,top:(e-i)/2}),It({w:n,h:i},{w:t,h:e},this.$stage,this.isRotated),this.imageLoaded||(this.$stage.find(P+"-loader").remove(),this.$stage.removeClass(D+"-align-center"),this.options.initAnimation&&!this.options.progressiveLoading&&this.$image.fadeIn(),this.imageLoaded=!0,this._triggerHook("changed",[this,this.index]))}},{key:"_loadImage",value:function(t){var e,i,n,o=this,s=(this.imageLoaded=!1,this._triggerHook("beforeChange",[this,this.prevIndex]),this._removeErrorMsg(),this.$image.removeAttr("style").attr("src",""),this.isRotated=!1,this.rotationDegree=0,this.$stage.append('<div class="'.concat(D,'-loader"></div>')),this.$stage.addClass(D+"-align-center"),this.options.initAnimation&&!this.options.progressiveLoading&&this.$image.hide(),null==(null==(s=this.images[t])?void 0:s.src)?"":this.images[t].src.toString()),a=(this.$image.attr("src",s),(null==(a=this.images[t])?void 0:a.title)||s.replace(/^.*?\/*([^/?]*)\.[a-z]+(\?.+|$)/gi,"$1"));this.options.title&&this.$title.html(a),this.$image.attr("alt",a),a=s,e=function(t){o.imageData={originalWidth:t.width,originalHeight:t.height},o.isMaximized||o.isOpened&&o.options.fixedModalPos?o._setImageSize():o._setModalSize()},i=function(){o.$stage.find(P+"-loader").remove(),o._triggerHook("changed",[o,t]),o._setErrorMsg()},(n=new Image).onload=function(){e(n)},n.onerror=function(){i(n)},n.src=a}},{key:"_setErrorMsg",value:function(){var t=_.isFunction(this.options.errorMsg)?this.options.errorMsg(this,this.index):this.options.errorMsg;t&&(this.$stage.append('<span class="'.concat(D,'-error-msg">').concat(t,"</span>")),this.$image.addClass(D+"-image-error"))}},{key:"_removeErrorMsg",value:function(){this.$stage.find(P+"-error-msg").remove(),this.$image.removeClass(D+"-image-error")}},{key:"jump",value:function(t){var e=Date.now();e-this._lastTimestamp>=this.options.animationDuration&&(t=this.index+t,this.jumpTo(t),this._lastTimestamp=e)}},{key:"jumpTo",value:function(t){this.prevIndex=this.index;t%=this.images.length;t<=0&&(t=(t+this.images.length)%this.images.length),this.index=t,this._loadImage(this.index)}},{key:"_wheel",value:function(t){t.preventDefault();var e=1,e=(t.deltaY?e=0<t.deltaY?1:-1:t.wheelDelta?e=-t.wheelDelta/120:t.detail&&(e=0<t.detail?1:-1),-e*this.options.ratioThreshold),t={x:t.clientX-this.$stage.offset().left+V.scrollLeft(),y:t.clientY-this.$stage.offset().top+V.scrollTop()};this.zoom(e,t)}},{key:"zoom",value:function(t,e){t=t<0?1/(1-t):1+t,(t=this.$image.width()/this.imageData.originalWidth*t)>this.options.maxRatio||t<this.options.minRatio||this.zoomTo(t,e)}},{key:"zoomTo",value:function(t,e){var i=this.imageData,n=i.originalWidth,o=i.originalHeight,s=i.width,a=i.height,r=i.left,h=i.top,i=i.initWidth,l=this.$stage.width(),c=this.$stage.height(),n=n*t,o=o*t,t=(e=void 0===e?{x:l/2,y:c/2}:e).x-(e.x-r)/s*n,r=e.y-(e.y-h)/a*o,s=this.isRotated?(n-o)/2:0,e=this.isRotated?o:n,h=this.isRotated?n:o,a=l-n,u=c-o,t=e<=l?a/2:-s<t?-s:Math.max(t,a+s),r=h<=c?u/2:s<r?s:Math.max(r,u-s);Math.abs(i-n)<.05*i?this._setImageSize():(this.$image.css({width:Math.round(n),height:Math.round(o),left:Math.round(t),top:Math.round(r)}),It({w:Math.round(e),h:Math.round(h)},{w:l,h:c},this.$stage)),_.extend(this.imageData,{width:n,height:o,left:t,top:r})}},{key:"rotate",value:function(t){this.rotationDegree=this.rotationDegree+t,this.rotationDegree/90%2==0?this.isRotated=!1:this.isRotated=!0,this.rotateTo(this.rotationDegree)}},{key:"rotateTo",value:function(t){this.$image.css({transform:"rotate("+t+"deg)"}),this._setImageSize()}},{key:"maximize",value:function(){this.$photoviewer.addClass(D+"-maximized"),this.$photoviewer.css({width:"auto",height:"auto",top:0,right:0,bottom:0,left:0}),this.isMaximized=!0}},{key:"exitMaximize",value:function(){this.$photoviewer.removeClass(D+"-maximized"),this._setModalToCenter(),this.isMaximized=!1}},{key:"toggleMaximize",value:function(){var t,e;this.isMaximized?this.exitMaximize():(t=this.$photoviewer.width(),e=this.$photoviewer.height(),E(this.$photoviewer)&&(t+=this._modalEdgeValue.horizontal,e+=this._modalEdgeValue.vertical),this.modalData={width:t,height:e,left:parseFloat(this.$photoviewer.css("left")),top:parseFloat(this.$photoviewer.css("top"))},this.maximize()),this._setImageSize(),this.$photoviewer[0].focus()}},{key:"fullscreen",value:function(){var t;(t=this.$photoviewer[0]).requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen(),this.$photoviewer[0].focus()}},{key:"resize",value:function(){this.isOpened&&(this.isMaximized?this._setImageSize():this._setModalSize())}},{key:"_keydown",value:function(t){if(this.options.keyboard){var e=t.keyCode||t.which||t.charCode,i=t.ctrlKey||t.metaKey,n=t.altKey;switch(e){case 37:case 38:t.preventDefault(),this.jump(-1);break;case 39:case 40:t.preventDefault(),this.jump(1);break;case 36:case 33:t.preventDefault(),this.jumpTo(0);break;case 35:case 34:t.preventDefault(),this.jumpTo(this.images.length-1);break;case 187:case 107:case 61:this.zoom(3*this.options.ratioThreshold,{x:this.$stage.width()/2,y:this.$stage.height()/2},t);break;case 189:case 109:case 173:this.zoom(3*-this.options.ratioThreshold,{x:this.$stage.width()/2,y:this.$stage.height()/2},t);break;case 48:i&&n&&this.zoomTo(1,{x:this.$stage.width()/2,y:this.$stage.height()/2},t);break;case 188:i&&(t.preventDefault(),this.rotate(-90));break;case 190:i&&this.rotate(90);break;case 81:this.close();break;case 88:n&&this.toggleMaximize();break;case 70:this.fullscreen()}}}},{key:"_addEvents",value:function(){var i,n,o,e=this;this.$close.on(L+R,function(){e.close()}),this.$stage.on("wheel mousewheel DOMMouseScroll"+R,function(t){e._wheel(t)}),this.$zoomIn.on(L+R,function(){e.zoom(3*e.options.ratioThreshold)}),this.$zoomOut.on(L+R,function(){e.zoom(3*-e.options.ratioThreshold)}),this.$actualSize.on(L+R,function(){e.zoomTo(1)}),this.$prev.on(L+R,function(){e.jump(-1)}),this.$next.on(L+R,function(){e.jump(1)}),this.$rotateLeft.on(L+R,function(){e.rotate(-90)}),this.$rotateRight.on(L+R,function(){e.rotate(90)}),this.$maximize.on(L+R,function(){e.toggleMaximize()}),this.$fullscreen.on(L+R,function(){e.fullscreen()}),this.$photoviewer.on("keydown"+R,function(t){e._keydown(t)}),C.on("resize"+R,(i=function(){return e.resize()},n=500,o=null,function(){var t=this,e=arguments;clearTimeout(o),o=setTimeout(function(){i.apply(t,e)},n)}))}},{key:"_addCustomButtonEvents",value:function(){var t,i=this;for(t in this.options.customButtons)(e=>{i.$photoviewer.find(P+"-button-"+e).on(L+R,function(t){i.options.customButtons[e].click.apply(i,[i,t])})})(t)}},{key:"_triggerHook",value:function(t,e){this.options.callbacks[t]&&this.options.callbacks[t].apply(this,_.isArray(e)?e:[e])}},{key:"_bringToFront",value:function(){var i=this,t=n.instances.filter(function(t){return t!==i}).sort(function(t,e){return t.zIndex-e.zIndex});t.push(this),t.forEach(function(t,e){e=i.options.zIndex+e;t.zIndex!==e&&(t.zIndex=e,t.$photoviewer.css("z-index",e))})}}])&&A(t.prototype,e),i&&A(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i})();return o(t,"instances",[]),_.extend(t.prototype,{draggable:function(i,t,e){var n=this,o=0,s=0,a=0,r=0,h=function(t){var e;(t=t||window.event).preventDefault(),S.isMoving||S.isResizing||n.isMaximized||(e="touchmove"===t.type?t.targetTouches[0].pageX:t.clientX,t="touchmove"===t.type?t.targetTouches[0].pageY:t.clientY,e=e-o,t=t-s,i.css({left:e+a,top:t+r}))},l=function(){V.off(H+R,h).off(k+R,l)};_(t).on(Bt+R,function(t){t=t||window.event,i[0].focus(),_(t.target).closest(e).length||(n.options.multiInstances&&n._bringToFront(),o="touchstart"===t.type?t.targetTouches[0].pageX:t.clientX,s="touchstart"===t.type?t.targetTouches[0].pageY:t.clientY,a=parseFloat(i.css("left")),r=parseFloat(i.css("top")),i.css({left:a,top:r,right:"",bottom:""}),V.on(H+R,h).on(k+R,l))})}},{movable:function(s,a){var r=this,h=0,l=0,c=0,u=0,d=0,f=0,p=0,g=function(t){(t=t||window.event).preventDefault();var e="touchmove"===t.type?t.targetTouches[0].pageX:t.clientX,t="touchmove"===t.type?t.targetTouches[0].pageY:t.clientY,e=e-h,t=t-l,i=e+c,n=t+u;0<f?p<t+u?n=p:t+u<-f+p&&(n=-f+p):n=u,0<d?-p<e+c?i=-p:e+c<-d-p&&(i=-d-p):i=c,a.css({left:i,top:n}),_.extend(r.imageData,{left:i,top:n})},m=function(){V.off(H+R,g).off(k+R,m),S.isMoving=!1,_(Nt).removeClass("is-grabbing")};s.on(Bt+R,function(t){(t=t||window.event).preventDefault();var e=a.width(),i=a.height(),n=s.width(),o=s.height();h="touchstart"===t.type?t.targetTouches[0].pageX:t.clientX,l="touchstart"===t.type?t.targetTouches[0].pageY:t.clientY,p=r.isRotated?(e-i)/2:0,d=r.isRotated?i-n:e-n,f=r.isRotated?e-o:i-o,S.isMoving=0<d||0<f,c=a.position().left-p,u=a.position().top+p,s.hasClass("is-grab")&&_(Nt).addClass("is-grabbing"),V.on(H+R,g).on(k+R,m)})}},{resizable:function(n,s,l){var a=this,t=_('<div class="'.concat(D,"-resizable-handle ").concat(D,'-resizable-handle-e"></div>')),e=_('<div class="'.concat(D,"-resizable-handle ").concat(D,'-resizable-handle-w"></div>')),i=_('<div class="'.concat(D,"-resizable-handle ").concat(D,'-resizable-handle-s"></div>')),o=_('<div class="'.concat(D,"-resizable-handle ").concat(D,'-resizable-handle-n"></div>')),r=_('<div class="'.concat(D,"-resizable-handle ").concat(D,'-resizable-handle-se"></div>')),h=_('<div class="'.concat(D,"-resizable-handle ").concat(D,'-resizable-handle-sw"></div>')),c=_('<div class="'.concat(D,"-resizable-handle ").concat(D,'-resizable-handle-ne"></div>')),u=_('<div class="'.concat(D,"-resizable-handle ").concat(D,'-resizable-handle-nw"></div>')),d={e:t,w:e,s:i,n:o,se:r,sw:h,ne:c,nw:u},f=(n.append(t,e,i,o,r,h,c,u),0),p=0,g={w:0,h:0,x:0,y:0},m={w:0,h:0,x:0,y:0},v={w:0,h:0,x:0,y:0},w=0,y=0,b=0,x="",z=(t=this.options).modalWidth,M=t.modalHeight,$=function(t,e,i){var n=-e+g.w>z?e+g.x:g.x+g.w-z,o=-i+g.h>M?i+g.y:g.y+g.h-M,s=Math.max(e+g.w,z),a=Math.max(i+g.h,M),e=Math.max(-e+g.w,z),i=Math.max(-i+g.h,M);return{e:{width:s},s:{height:a},se:{width:s,height:a},w:{width:e,left:n},n:{height:i,top:o},nw:{width:e,height:i,top:o,left:n},ne:{width:s,height:i,top:o},sw:{width:e,height:a,left:n}}[t]},T=function(t,e,i){var n=e+g.w>z?m.w-y+e-w:z-(g.w-m.w)-y-w,o=i+g.h>M?m.h-b+i+w:M-(g.h-m.h)-b+w,e=-e+g.w>z?m.w-y-e-w:z-(g.w-m.w)-y-w,i=-i+g.h>M?m.h-b-i+w:M-(g.h-m.h)-b+w,s=l.position().left,a=l.position().top,r=(0<n?s:Math.min(s,0))-w,h=(0<o?a:Math.min(a,0))+w,s=(0<e?s:Math.min(s,0))-w,a=(0<i?a:Math.min(a,0))+w,r=-w<=n?(n-w)/2:Math.max(r,n),n=w<=o?(o+w)/2:Math.max(h,o),h=-w<=e?(e-w)/2:Math.max(s,e),o=w<=i?(i+w)/2:Math.max(a,i);return{e:{left:r},s:{top:n},se:{top:n,left:r},w:{left:h},n:{top:o},nw:{top:o,left:h},ne:{top:o,left:r},sw:{top:n,left:h}}[t]},C=function(t){var e,i;(t=t||window.event).preventDefault(),a.isMaximized||(e="touchmove"===t.type?t.targetTouches[0].pageX:t.clientX,t="touchmove"===t.type?t.targetTouches[0].pageY:t.clientY,i=$(x,e=e-f,t=t-p),n.css(i),i=T(x,e,t),l.css(i))},L=function(){V.off(H+R,C).off(k+R,L);var t=s.width(),e=s.height(),i=(S.isResizing&&It({w:y,h:b},{w:t,h:e},s),S.isResizing=!1,_(Yt).css("cursor",""),a.imageData),n=i.originalWidth,i=i.originalHeight,o=jt(n,i,t,e,a.isRotated),n=n*o,i=i*o;_.extend(a.imageData,{initWidth:n,initHeight:i,initLeft:(t-n)/2,initTop:(e-i)/2})};_.each(d,function(i,t){t.on(Bt+R,function(t){var e;e=i,(t=(t=t)||window.event).preventDefault(),S.isResizing=!0,f="touchstart"===t.type?t.targetTouches[0].pageX:t.clientX,p="touchstart"===t.type?t.targetTouches[0].pageY:t.clientY,g={w:n.width()+(E(n)?a._modalEdgeValue.horizontal:0),h:n.height()+(E(n)?a._modalEdgeValue.vertical:0),x:n.position().left,y:n.position().top},m={w:s.width(),h:s.height(),x:s.position().left,y:s.position().top},v={w:l.width(),h:l.height(),x:l.position().left,y:l.position().top},w=a.isRotated?(v.w-v.h)/2:0,y=a.isRotated?v.h:v.w,b=a.isRotated?v.w:v.h,x=e,_(Yt).css("cursor",Xt[e]+"-resize"),V.on(H+R,C).on(k+R,L)})})}}),t});