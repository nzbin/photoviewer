{"version":3,"file":"photoviewer.common.js","sources":["../src/js/domq/d-class.js","../src/js/domq/vars.js","../src/js/domq/utils.js","../src/js/domq/core.js","../src/js/domq/event.js","../src/js/defaults.js","../src/js/utilities.js","../src/js/constants.js","../src/js/draggable.js","../src/js/movable.js","../src/js/resizable.js","../src/js/core.js"],"sourcesContent":["// Class D\r\nvar D = function (selector, context) {\r\n    return new D.fn.init(selector, context);\r\n}\r\n\r\nexport default D;","var emptyArray = [],\r\n  concat = emptyArray.concat,\r\n  filter = emptyArray.filter,\r\n  slice = emptyArray.slice,\r\n  document = window.document,\r\n  elementDisplay = {},\r\n  classCache = {},\r\n  cssNumber = {\r\n    'column-count': 1,\r\n    'columns': 1,\r\n    'font-weight': 1,\r\n    'line-height': 1,\r\n    'opacity': 1,\r\n    'z-index': 1,\r\n    'zoom': 1\r\n  },\r\n  fragmentRE = /^\\s*<(\\w+|!)[^>]*>/,\r\n  singleTagRE = /^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,\r\n  tagExpanderRE = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/ig,\r\n  rootNodeRE = /^(?:body|html)$/i,\r\n  capitalRE = /([A-Z])/g,\r\n\r\n  // special attributes that should be get/set via method calls\r\n  methodAttributes = ['val', 'css', 'html', 'text', 'data', 'width', 'height', 'offset'],\r\n\r\n  adjacencyOperators = ['after', 'prepend', 'before', 'append'],\r\n  dimensions= ['width', 'height'],\r\n\r\n  table = document.createElement('table'),\r\n  tableRow = document.createElement('tr'),\r\n  containers = {\r\n    'tr': document.createElement('tbody'),\r\n    'tbody': table,\r\n    'thead': table,\r\n    'tfoot': table,\r\n    'td': tableRow,\r\n    'th': tableRow,\r\n    '*': document.createElement('div')\r\n  },\r\n  simpleSelectorRE = /^[\\w-]*$/,\r\n  class2type = {},\r\n  toString = class2type.toString,\r\n  tempParent = document.createElement('div'),\r\n  propMap = {\r\n    'tabindex': 'tabIndex',\r\n    'readonly': 'readOnly',\r\n    'for': 'htmlFor',\r\n    'class': 'className',\r\n    'maxlength': 'maxLength',\r\n    'cellspacing': 'cellSpacing',\r\n    'cellpadding': 'cellPadding',\r\n    'rowspan': 'rowSpan',\r\n    'colspan': 'colSpan',\r\n    'usemap': 'useMap',\r\n    'frameborder': 'frameBorder',\r\n    'contenteditable': 'contentEditable'\r\n  },\r\n  isArray = Array.isArray || function (arg) {\r\n    return Object.prototype.toString.call(arg) === '[object Array]';\r\n  },\r\n  // Using in Event\r\n  handlers = {},\r\n  specialEvents = {\r\n    click: 'MouseEvents',\r\n    mousedown: 'MouseEvents',\r\n    mouseup: 'MouseEvents',\r\n    mousemove: 'MouseEvents',\r\n  },\r\n  focusinSupported = 'onfocusin' in window,\r\n  focus = { focus: 'focusin', blur: 'focusout' },\r\n  hover = { mouseenter: 'mouseover', mouseleave: 'mouseout' },\r\n  ignoreProperties = /^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,\r\n  eventMethods = {\r\n    preventDefault: 'isDefaultPrevented',\r\n    stopImmediatePropagation: 'isImmediatePropagationStopped',\r\n    stopPropagation: 'isPropagationStopped'\r\n  };\r\n\r\nexport {\r\n  emptyArray,\r\n  concat,\r\n  filter,\r\n  slice,\r\n  document,\r\n  elementDisplay,\r\n  classCache,\r\n  cssNumber,\r\n  fragmentRE,\r\n  singleTagRE,\r\n  tagExpanderRE,\r\n  rootNodeRE,\r\n  capitalRE,\r\n  methodAttributes,\r\n  adjacencyOperators,\r\n  dimensions,\r\n  containers,\r\n  simpleSelectorRE,\r\n  class2type,\r\n  toString,\r\n  tempParent,\r\n  propMap,\r\n  isArray,\r\n  handlers,\r\n  specialEvents,\r\n  focusinSupported,\r\n  focus,\r\n  hover,\r\n  ignoreProperties,\r\n  eventMethods,\r\n}\r\n\r\n\r\n","import D from './d-class';\r\n\r\nimport {\r\n  filter,\r\n  slice,\r\n  document,\r\n  elementDisplay,\r\n  classCache,\r\n  cssNumber,\r\n  class2type,\r\n  toString\r\n} from './vars';\r\n\r\nfunction type(obj) {\r\n  return obj == null\r\n    ? String(obj)\r\n    : class2type[toString.call(obj)] || \"object\"\r\n}\r\n\r\nfunction isFunction(value) {\r\n  return type(value) == \"function\"\r\n}\r\n\r\nfunction isWindow(obj) {\r\n  return obj != null && obj == obj.window\r\n}\r\n\r\nfunction isDocument(obj) {\r\n  return obj != null && obj.nodeType == obj.DOCUMENT_NODE\r\n}\r\n\r\nfunction isObject(obj) {\r\n  return type(obj) == \"object\"\r\n}\r\n\r\nfunction isPlainObject(obj) {\r\n  return isObject(obj) && !isWindow(obj) && Object.getPrototypeOf(obj) == Object.prototype\r\n}\r\n\r\nfunction likeArray(obj) {\r\n  var length = !!obj && 'length' in obj && obj.length,\r\n    typeRes = type(obj);\r\n\r\n  return 'function' != typeRes && !isWindow(obj) && (\r\n    'array' == typeRes || length === 0 ||\r\n    (typeof length == 'number' && length > 0 && (length - 1) in obj)\r\n  )\r\n}\r\n\r\nfunction compact(array) {\r\n  return filter.call(array, function (item) {\r\n    return item != null\r\n  })\r\n}\r\n\r\nfunction flatten(array) {\r\n  return array.length > 0 ? D.fn.concat.apply([], array) : array\r\n}\r\n\r\nfunction dasherize(str) {\r\n  return str.replace(/::/g, '/')\r\n    .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')\r\n    .replace(/([a-z\\d])([A-Z])/g, '$1_$2')\r\n    .replace(/_/g, '-')\r\n    .toLowerCase()\r\n}\r\n\r\nfunction maybeAddPx(name, value) {\r\n  return (typeof value == \"number\" && !cssNumber[dasherize(name)]) ? value + \"px\" : value\r\n}\r\n\r\nfunction uniq(array) {\r\n  return filter.call(array, function (item, idx) {\r\n    return array.indexOf(item) == idx\r\n  })\r\n}\r\n\r\nfunction camelize(str) {\r\n  return str.replace(/-+(.)?/g, function (match, chr) {\r\n    return chr ? chr.toUpperCase() : ''\r\n  })\r\n}\r\n\r\nfunction classRE(name) {\r\n  return name in classCache ?\r\n    classCache[name] : (classCache[name] = new RegExp('(^|\\\\s)' + name + '(\\\\s|$)'))\r\n}\r\n\r\nfunction defaultDisplay(nodeName) {\r\n  var element, display\r\n  if (!elementDisplay[nodeName]) {\r\n    element = document.createElement(nodeName)\r\n    document.body.appendChild(element)\r\n    display = getComputedStyle(element, '').getPropertyValue(\"display\")\r\n    element.parentNode.removeChild(element)\r\n    display == \"none\" && (display = \"block\")\r\n    elementDisplay[nodeName] = display\r\n  }\r\n  return elementDisplay[nodeName]\r\n}\r\n\r\nfunction children(element) {\r\n  return 'children' in element ?\r\n    slice.call(element.children) :\r\n    D.map(element.childNodes, function (node) {\r\n      if (node.nodeType == 1) return node\r\n    })\r\n}\r\n\r\n// \"true\"  => true\r\n// \"false\" => false\r\n// \"null\"  => null\r\n// \"42\"    => 42\r\n// \"42.5\"  => 42.5\r\n// \"08\"    => \"08\"\r\n// JSON    => parse if valid\r\n// String  => self\r\nfunction deserializeValue(value) {\r\n  try {\r\n    return value ?\r\n      value == \"true\" ||\r\n      (value == \"false\" ? false :\r\n        value == \"null\" ? null :\r\n          +value + \"\" == value ? +value :\r\n            /^[\\[\\{]/.test(value) ? JSON.parse(value) :\r\n              value) :\r\n      value\r\n  } catch (e) {\r\n    return value\r\n  }\r\n}\r\nfunction filtered(nodes, selector) {\r\n  return selector == null ? D(nodes) : D(nodes).filter(selector)\r\n}\r\n\r\nfunction funcArg(context, arg, idx, payload) {\r\n  return isFunction(arg) ? arg.call(context, idx, payload) : arg\r\n}\r\n\r\nfunction setAttribute(node, name, value) {\r\n  value == null ? node.removeAttribute(name) : node.setAttribute(name, value)\r\n}\r\n\r\n// access className property while respecting SVGAnimatedString\r\nfunction className(node, value) {\r\n  var klass = node.className || '',\r\n    svg = klass && klass.baseVal !== undefined\r\n\r\n  if (value === undefined) return svg ? klass.baseVal : klass\r\n  svg ? (klass.baseVal = value) : (node.className = value)\r\n}\r\n\r\n/*  Event Usage */\r\nfunction isString(obj) {\r\n  return typeof obj == 'string'\r\n}\r\nfunction returnTrue() {\r\n  return true\r\n}\r\nfunction returnFalse() {\r\n  return false\r\n}\r\n\r\nexport {\r\n  type,\r\n  isFunction,\r\n  isWindow,\r\n  isDocument,\r\n  isObject,\r\n  isPlainObject,\r\n  likeArray,\r\n  compact,\r\n  flatten,\r\n  dasherize,\r\n  maybeAddPx,\r\n  uniq,\r\n  camelize,\r\n  classRE,\r\n  defaultDisplay,\r\n  deserializeValue,\r\n  children,\r\n  filtered,\r\n  funcArg,\r\n  setAttribute,\r\n  className,\r\n  isString,\r\n  returnTrue,\r\n  returnFalse\r\n}\r\n\r\n\r\n","import D from './d-class';\r\n\r\nimport {\r\n    emptyArray,\r\n    concat,\r\n    filter,\r\n    slice,\r\n    document,\r\n    fragmentRE,\r\n    singleTagRE,\r\n    tagExpanderRE,\r\n    rootNodeRE,\r\n    capitalRE,\r\n    methodAttributes,\r\n    adjacencyOperators,\r\n    dimensions,\r\n    containers,\r\n    simpleSelectorRE,\r\n    class2type,\r\n    tempParent,\r\n    propMap,\r\n    isArray\r\n} from './vars';\r\n\r\nimport {\r\n    type,\r\n    isFunction,\r\n    isWindow,\r\n    isDocument,\r\n    isObject,\r\n    isPlainObject,\r\n    likeArray,\r\n    compact,\r\n    flatten,\r\n    dasherize,\r\n    maybeAddPx,\r\n    uniq,\r\n    camelize,\r\n    classRE,\r\n    defaultDisplay,\r\n    deserializeValue,\r\n    children,\r\n    filtered,\r\n    funcArg,\r\n    setAttribute,\r\n    className\r\n} from './utils';\r\n\r\nD.fn = D.prototype = {\r\n    constuctor: D,\r\n    length: 0,\r\n    // Because a collection acts like an array\r\n    // copy over these useful array functions.\r\n    forEach: emptyArray.forEach,\r\n    reduce: emptyArray.reduce,\r\n    push: emptyArray.push,\r\n    sort: emptyArray.sort,\r\n    splice: emptyArray.splice,\r\n    indexOf: emptyArray.indexOf,\r\n    // D's counterpart to jQuery's `$.fn.init` and\r\n    // takes a CSS selector and an optional context (and handles various\r\n    // special cases).\r\n    init: function (selector, context) {\r\n        var dom;\r\n        // If nothing given, return an empty D collection\r\n        if (!selector) {\r\n            return this\r\n        }\r\n        // Optimize for string selectors\r\n        else if (typeof selector == 'string') {\r\n            selector = selector.trim()\r\n            // If it's a html fragment, create nodes from it\r\n            // Note: In both Chrome 21 and Firefox 15, DOM error 12\r\n            // is thrown if the fragment doesn't begin with <\r\n            if (selector[0] == '<' && fragmentRE.test(selector)) {\r\n                dom = D.fragment(selector, RegExp.$1, context);\r\n                selector = null;\r\n            }\r\n            // If there's a context, create a collection on that context first, and select\r\n            // nodes from there\r\n            else if (context !== undefined) {\r\n                return D(context).find(selector)\r\n            }\r\n            // If it's a CSS selector, use it to select nodes.\r\n            else {\r\n                dom = D.qsa(document, selector)\r\n            }\r\n        }\r\n        // If a function is given, call it when the DOM is ready\r\n        else if (isFunction(selector)) {\r\n            return D(document).ready(selector)\r\n        }\r\n        // If a D collection is given, just return it\r\n        else if (D.isD(selector)) {\r\n            return selector\r\n        }\r\n        // normalize array if an array of nodes is given\r\n        else if (isArray(selector)) {\r\n            dom = compact(selector)\r\n        }\r\n        // Wrap DOM nodes.\r\n        else if (isObject(selector)) {\r\n            dom = [selector], selector = null\r\n        }\r\n        // If there's a context, create a collection on that context first, and select\r\n        // nodes from there\r\n        else if (context !== undefined) {\r\n            return D(context).find(selector)\r\n        }\r\n        // And last but no least, if it's a CSS selector, use it to select nodes.\r\n        else {\r\n            dom = D.qsa(document, selector)\r\n        }\r\n        // create a new D collection from the nodes found\r\n        return D.makeArray(dom, selector, this);\r\n    }\r\n}\r\n\r\nD.extend = D.fn.extend = function () {\r\n    var options, name, src, copy, copyIsArray, clone,\r\n        target = arguments[0] || {},\r\n        i = 1,\r\n        length = arguments.length,\r\n        deep = false;\r\n\r\n    // Handle a deep copy situation\r\n    if (typeof target === \"boolean\") {\r\n        deep = target;\r\n\r\n        // Skip the boolean and the target\r\n        target = arguments[i] || {};\r\n        i++;\r\n    }\r\n    // Handle case when target is a string or something (possible in deep copy)\r\n    if (typeof target !== \"object\" && !isFunction(target)) {\r\n        target = {};\r\n    }\r\n    // Extend D itself if only one argument is passed\r\n    if (i === length) {\r\n        target = this;\r\n        i--;\r\n    }\r\n    for (; i < length; i++) {\r\n        // Only deal with non-null/undefined values\r\n        if ((options = arguments[i]) != null) {\r\n            // Extend the base object\r\n            for (name in options) {\r\n                src = target[name];\r\n                copy = options[name];\r\n                // Prevent never-ending loop\r\n                if (target === copy) {\r\n                    continue;\r\n                }\r\n                // Recurse if we're merging plain objects or arrays\r\n                if (deep && copy && (D.isPlainObject(copy) ||\r\n                    (copyIsArray = Array.isArray(copy)))) {\r\n                    if (copyIsArray) {\r\n                        copyIsArray = false;\r\n                        clone = src && Array.isArray(src) ? src : [];\r\n                    } else {\r\n                        clone = src && D.isPlainObject(src) ? src : {};\r\n                    }\r\n                    // Never move original objects, clone them\r\n                    target[name] = D.extend(deep, clone, copy);\r\n                    // Don't bring in undefined values\r\n                } else if (copy !== undefined) {\r\n                    target[name] = copy;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // Return the modified object\r\n    return target;\r\n}\r\n\r\nD.extend({\r\n    type: type,\r\n    isFunction: isFunction,\r\n    isWindow: isWindow,\r\n    isPlainObject: isPlainObject,\r\n    camelCase: camelize,\r\n    isArray: isArray,\r\n    isEmptyObject: function (obj) {\r\n        var name\r\n        for (name in obj) return false\r\n        return true\r\n    },\r\n    isNumeric: function (val) {\r\n        var num = Number(val),\r\n            type = typeof val\r\n        return val != null && type != 'boolean' &&\r\n            (type != 'string' || val.length) &&\r\n            !isNaN(num) && isFinite(num) || false\r\n    },\r\n    inArray: function (elem, array, i) {\r\n        return emptyArray.indexOf.call(array, elem, i)\r\n    },\r\n    trim: function (str) {\r\n        return str == null ? \"\" : String.prototype.trim.call(str)\r\n    },\r\n    noop: function () { },\r\n    map: function (elements, callback) {\r\n        var value, values = [],\r\n            i, key\r\n        if (likeArray(elements))\r\n            for (i = 0; i < elements.length; i++) {\r\n                value = callback(elements[i], i)\r\n                if (value != null) values.push(value)\r\n            }\r\n        else\r\n            for (key in elements) {\r\n                value = callback(elements[key], key)\r\n                if (value != null) values.push(value)\r\n            }\r\n        return flatten(values)\r\n    },\r\n    each: function (elements, callback) {\r\n        var i, key\r\n        if (likeArray(elements)) {\r\n            for (i = 0; i < elements.length; i++)\r\n                if (callback.call(elements[i], i, elements[i]) === false) return elements\r\n        } else {\r\n            for (key in elements)\r\n                if (callback.call(elements[key], key, elements[key]) === false) return elements\r\n        }\r\n\r\n        return elements\r\n    },\r\n    grep: function (elements, callback) {\r\n        return filter.call(elements, callback)\r\n    },\r\n    contains: function () {\r\n        return (document.documentElement.contains\r\n            ? function (parent, node) {\r\n                return parent !== node && parent.contains(node)\r\n            }\r\n            : function (parent, node) {\r\n                while (node && (node = node.parentNode))\r\n                    if (node === parent) return true\r\n                return false\r\n            });\r\n    },\r\n\r\n    // Make DOM Array\r\n    makeArray: function (dom, selector, me) {\r\n        var i, len = dom ? dom.length : 0\r\n        for (i = 0; i < len; i++) me[i] = dom[i]\r\n        me.length = len\r\n        me.selector = selector || ''\r\n        return me;\r\n    },\r\n    // Html -> Node\r\n    fragment: function (html, name, properties) {\r\n        var dom, nodes, container\r\n\r\n        // A special case optimization for a single tag\r\n        if (singleTagRE.test(html)) {\r\n            dom = D(document.createElement(RegExp.$1))\r\n        }\r\n\r\n        if (!dom) {\r\n\r\n            if (html.replace) {\r\n                html = html.replace(tagExpanderRE, \"<$1></$2>\")\r\n            }\r\n\r\n            if (name === undefined) {\r\n                name = fragmentRE.test(html) && RegExp.$1\r\n            }\r\n\r\n            if (!(name in containers)) {\r\n                name = '*'\r\n            }\r\n\r\n            container = containers[name]\r\n            container.innerHTML = '' + html\r\n            dom = D.each(slice.call(container.childNodes), function () {\r\n                container.removeChild(this)\r\n            })\r\n        }\r\n\r\n        if (isPlainObject(properties)) {\r\n            nodes = D(dom)\r\n            D.each(properties, function (key, value) {\r\n                if (methodAttributes.indexOf(key) > -1) nodes[key](value)\r\n                else nodes.attr(key, value)\r\n            })\r\n        }\r\n\r\n        return dom\r\n    },\r\n    // D's CSS selector\r\n    qsa: function (element, selector) {\r\n        var found,\r\n            maybeID = selector[0] == '#',\r\n            maybeClass = !maybeID && selector[0] == '.',\r\n            // Ensure that a 1 char tag name still gets checked\r\n            nameOnly = maybeID || maybeClass ? selector.slice(1) : selector,\r\n            isSimple = simpleSelectorRE.test(nameOnly)\r\n        return (\r\n            // Safari DocumentFragment doesn't have getElementById\r\n            element.getElementById && isSimple && maybeID)\r\n            ? (\r\n                (found = element.getElementById(nameOnly))\r\n                    ? [found]\r\n                    : []\r\n            ) : (\r\n                element.nodeType !== 1 && element.nodeType !== 9 && element.nodeType !== 11\r\n            )\r\n                ? []\r\n                : slice.call(\r\n                    // DocumentFragment doesn't have getElementsByClassName/TagName\r\n                    isSimple && !maybeID && element.getElementsByClassName\r\n                        ? maybeClass\r\n                            // If it's simple, it could be a class\r\n                            ? element.getElementsByClassName(nameOnly)\r\n                            // Or a tag\r\n                            : element.getElementsByTagName(selector)\r\n                        // Or it's not simple, and we need to query all\r\n                        : element.querySelectorAll(selector)\r\n                )\r\n    },\r\n    isD: function (object) {\r\n        return object instanceof D\r\n    },\r\n    matches: function (element, selector) {\r\n        if (!selector || !element || element.nodeType !== 1) return false\r\n        var matchesSelector = element.matches || element.webkitMatchesSelector ||\r\n            element.mozMatchesSelector || element.oMatchesSelector ||\r\n            element.matchesSelector\r\n        if (matchesSelector) return matchesSelector.call(element, selector)\r\n        // fall back to performing a selector:\r\n        var match, parent = element.parentNode,\r\n            temp = !parent\r\n        if (temp) (parent = tempParent).appendChild(element)\r\n        match = ~D.qsa(parent, selector).indexOf(element)\r\n        temp && tempParent.removeChild(element)\r\n        return match\r\n    }\r\n});\r\n\r\n// Populate the class2type map\r\nD.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"), function (i, name) {\r\n    class2type[\"[object \" + name + \"]\"] = name.toLowerCase()\r\n});\r\n\r\n// Methods in Prototype\r\nD.fn.extend({\r\n    // ðŸ’” Modify the collection by adding elements to it\r\n    concat: function () {\r\n        var i, value, args = []\r\n        for (i = 0; i < arguments.length; i++) {\r\n            value = arguments[i]\r\n            args[i] = D.isD(value) ? value.toArray() : value\r\n        }\r\n        return concat.apply(D.isD(this) ? this.toArray() : this, args)\r\n    },\r\n    // ðŸ’” `pluck` is borrowed from Prototype.js\r\n    pluck: function (property) {\r\n        return D.map(this, function (el) { return el[property] })\r\n    },\r\n\r\n    /* Traversing */\r\n    // Filtering\r\n    filter: function (selector) {\r\n        if (isFunction(selector)) return this.not(this.not(selector))\r\n        return D(filter.call(this, function (element) {\r\n            return D.matches(element, selector)\r\n        }))\r\n    },\r\n    not: function (selector) {\r\n        var nodes = []\r\n        if (isFunction(selector) && selector.call !== undefined)\r\n            this.each(function (idx) {\r\n                if (!selector.call(this, idx)) nodes.push(this)\r\n            })\r\n        else {\r\n            var excludes = typeof selector == 'string' ? this.filter(selector) :\r\n                (likeArray(selector) && isFunction(selector.item)) ? slice.call(selector) : D(selector)\r\n            this.forEach(function (el) {\r\n                if (excludes.indexOf(el) < 0) nodes.push(el)\r\n            })\r\n        }\r\n        return D(nodes)\r\n    },\r\n    is: function (selector) {\r\n        return typeof selector == 'string'\r\n            ? this.length > 0 && D.matches(this[0], selector)\r\n            : selector && this.selector == selector.selector\r\n    },\r\n    has: function (selector) {\r\n        return this.filter(function () {\r\n            return isObject(selector) ?\r\n                D.contains(this, selector) :\r\n                D(this).find(selector).size()\r\n        })\r\n    },\r\n    eq: function (idx) {\r\n        return idx === -1 ? this.slice(idx) : this.slice(idx, +idx + 1)\r\n    },\r\n    first: function () {\r\n        var el = this[0]\r\n        return el && !isObject(el) ? el : D(el)\r\n    },\r\n    last: function () {\r\n        var el = this[this.length - 1]\r\n        return el && !isObject(el) ? el : D(el)\r\n    },\r\n    slice: function () {\r\n        return D(slice.apply(this, arguments))\r\n    },\r\n    find: function (selector) {\r\n        var result, $this = this\r\n        if (!selector) result = D()\r\n        else if (typeof selector == 'object')\r\n            result = D(selector).filter(function () {\r\n                var node = this\r\n                return emptyArray.some.call($this, function (parent) {\r\n                    return D.contains(parent, node)\r\n                })\r\n            })\r\n        else if (this.length == 1) result = D(D.qsa(this[0], selector))\r\n        else result = this.map(function () { return D.qsa(this, selector) })\r\n        return result\r\n    },\r\n    // Miscellaneous Traversing\r\n    add: function (selector, context) {\r\n        return D(uniq(this.concat(D(selector, context))))\r\n    },\r\n    contents: function () {\r\n        return this.map(function () { return this.contentDocument || slice.call(this.childNodes) })\r\n    },\r\n    // Tree Traversal\r\n    closest: function (selector, context) {\r\n        var nodes = [],\r\n            collection = typeof selector == 'object' && D(selector)\r\n        this.each(function (_, node) {\r\n            while (node && !(collection ? collection.indexOf(node) >= 0 : D.matches(node, selector)))\r\n                node = node !== context && !isDocument(node) && node.parentNode\r\n            if (node && nodes.indexOf(node) < 0) nodes.push(node)\r\n        })\r\n        return D(nodes)\r\n    },\r\n    parents: function (selector) {\r\n        var ancestors = [],\r\n            nodes = this\r\n        while (nodes.length > 0)\r\n            nodes = D.map(nodes, function (node) {\r\n                if ((node = node.parentNode) && !isDocument(node) && ancestors.indexOf(node) < 0) {\r\n                    ancestors.push(node)\r\n                    return node\r\n                }\r\n            })\r\n        return filtered(ancestors, selector)\r\n    },\r\n    parent: function (selector) {\r\n        return filtered(uniq(this.pluck('parentNode')), selector)\r\n    },\r\n    children: function (selector) {\r\n        return filtered(this.map(function () { return children(this) }), selector)\r\n    },\r\n    siblings: function (selector) {\r\n        return filtered(this.map(function (i, el) {\r\n            return filter.call(children(el.parentNode), function (child) { return child !== el })\r\n        }), selector)\r\n    },\r\n    offsetParent: function () {\r\n        return this.map(function () {\r\n            var parent = this.offsetParent || document.body\r\n            while (parent && !rootNodeRE.test(parent.nodeName) && D(parent).css(\"position\") == \"static\")\r\n                parent = parent.offsetParent\r\n            return parent\r\n        })\r\n    },\r\n    prev: function (selector) {\r\n        return D(this.pluck('previousElementSibling')).filter(selector || '*')\r\n    },\r\n    next: function (selector) {\r\n        return D(this.pluck('nextElementSibling')).filter(selector || '*')\r\n    },\r\n\r\n    /* Attribute */\r\n    // General Attributes\r\n    attr: function (name, value) {\r\n        var result\r\n        return (typeof name == 'string' && !(1 in arguments)) ?\r\n            (0 in this && this[0].nodeType == 1 && (result = this[0].getAttribute(name)) != null ? result : undefined) :\r\n            this.each(function (idx) {\r\n                if (this.nodeType !== 1) return\r\n                if (isObject(name))\r\n                    for (var key in name) setAttribute(this, key, name[key])\r\n                else setAttribute(this, name, funcArg(this, value, idx, this.getAttribute(name)))\r\n            })\r\n    },\r\n    removeAttr: function (name) {\r\n        return this.each(function () {\r\n            this.nodeType === 1 && name.split(' ').forEach(function (attribute) {\r\n                setAttribute(this, attribute)\r\n            }, this)\r\n        })\r\n    },\r\n    prop: function (name, value) {\r\n        name = propMap[name] || name\r\n        return (typeof name == 'string' && !(1 in arguments)) ?\r\n            (this[0] && this[0][name]) :\r\n            this.each(function (idx) {\r\n                if (isObject(name))\r\n                    for (var key in name) this[propMap[key] || key] = name[key]\r\n                else this[name] = funcArg(this, value, idx, this[name])\r\n            })\r\n    },\r\n    removeProp: function (name) {\r\n        name = propMap[name] || name\r\n        return this.each(function () { delete this[name] })\r\n    },\r\n    val: function (value) {\r\n        if (0 in arguments) {\r\n            if (value == null) value = \"\"\r\n            return this.each(function (idx) {\r\n                this.value = funcArg(this, value, idx, this.value)\r\n            })\r\n        } else {\r\n            return this[0] && (this[0].multiple ?\r\n                D(this[0]).find('option').filter(function () { return this.selected }).pluck('value') :\r\n                this[0].value)\r\n        }\r\n    },\r\n    // Class Attributes\r\n    hasClass: function (name) {\r\n        if (!name) return false\r\n        return emptyArray.some.call(this, function (el) {\r\n            return this.test(className(el))\r\n        }, classRE(name))\r\n    },\r\n    addClass: function (name) {\r\n        var classList = [];\r\n        if (!name) return this\r\n        return this.each(function (idx) {\r\n            if (!('className' in this)) return\r\n            classList = []\r\n            var cls = className(this),\r\n                newName = funcArg(this, name, idx, cls)\r\n            newName.split(/\\s+/g).forEach(function (klass) {\r\n                if (!D(this).hasClass(klass)) classList.push(klass)\r\n            }, this)\r\n            classList.length && className(this, cls + (cls ? \" \" : \"\") + classList.join(\" \"))\r\n        })\r\n    },\r\n    removeClass: function (name) {\r\n        var classList = [];\r\n        return this.each(function (idx) {\r\n            if (!('className' in this)) return\r\n            if (name === undefined) return className(this, '')\r\n            classList = className(this)\r\n            funcArg(this, name, idx, classList).split(/\\s+/g).forEach(function (klass) {\r\n                classList = classList.replace(classRE(klass), \" \")\r\n            })\r\n            className(this, classList.trim())\r\n        })\r\n    },\r\n    toggleClass: function (name, when) {\r\n        if (!name) return this\r\n        return this.each(function (idx) {\r\n            var $this = D(this),\r\n                names = funcArg(this, name, idx, className(this))\r\n            names.split(/\\s+/g).forEach(function (klass) {\r\n                (when === undefined ? !$this.hasClass(klass) : when) ?\r\n                    $this.addClass(klass) : $this.removeClass(klass)\r\n            })\r\n        })\r\n    },\r\n    // DOM Insertion\r\n    html: function (html) {\r\n        return 0 in arguments ?\r\n            this.each(function (idx) {\r\n                var originHtml = this.innerHTML\r\n                D(this).empty().append(funcArg(this, html, idx, originHtml))\r\n            }) :\r\n            (0 in this ? this[0].innerHTML : null)\r\n    },\r\n    text: function (text) {\r\n        return 0 in arguments ?\r\n            this.each(function (idx) {\r\n                var newText = funcArg(this, text, idx, this.textContent)\r\n                this.textContent = newText == null ? '' : '' + newText\r\n            }) :\r\n            (0 in this ? this.pluck('textContent').join(\"\") : null)\r\n    },\r\n\r\n    /* CSS */\r\n    css: function (property, value) {\r\n        if (arguments.length < 2) {\r\n            var element = this[0]\r\n            if (typeof property == 'string') {\r\n                if (!element) return\r\n                return element.style[camelize(property)] || getComputedStyle(element, '').getPropertyValue(property)\r\n            } else if (isArray(property)) {\r\n                if (!element) return\r\n                var props = {}\r\n                var computedStyle = getComputedStyle(element, '');\r\n                D.each(property, function (_, prop) {\r\n                    props[prop] = (element.style[camelize(prop)] || computedStyle.getPropertyValue(prop))\r\n                });\r\n                return props\r\n            }\r\n        }\r\n\r\n        var css = ''\r\n        if (type(property) == 'string') {\r\n            if (!value && value !== 0) {\r\n                this.each(function () {\r\n                    this.style.removeProperty(dasherize(property));\r\n                });\r\n            } else {\r\n                css = dasherize(property) + \":\" + maybeAddPx(property, value)\r\n            }\r\n        } else {\r\n            for (var key in property) {\r\n                if (!property[key] && property[key] !== 0) {\r\n                    this.each(function () { this.style.removeProperty(dasherize(key)) })\r\n                } else {\r\n                    css += dasherize(key) + ':' + maybeAddPx(key, property[key]) + ';'\r\n                }\r\n            }\r\n        }\r\n\r\n        return this.each(function () { this.style.cssText += ';' + css })\r\n    },\r\n    offset: function (coordinates) {\r\n        if (coordinates) return this.each(function (index) {\r\n            var $this = D(this),\r\n                coords = funcArg(this, coordinates, index, $this.offset()),\r\n                parentOffset = $this.offsetParent().offset(),\r\n                props = {\r\n                    top: coords.top - parentOffset.top,\r\n                    left: coords.left - parentOffset.left\r\n                }\r\n\r\n            if ($this.css('position') == 'static') props['position'] = 'relative'\r\n            $this.css(props)\r\n        })\r\n        if (!this.length) return null\r\n        if (document.documentElement !== this[0] && !D.contains(document.documentElement, this[0]))\r\n            return { top: 0, left: 0 }\r\n        var obj = this[0].getBoundingClientRect()\r\n        return {\r\n            left: obj.left + window.pageXOffset,\r\n            top: obj.top + window.pageYOffset,\r\n            width: Math.round(obj.width),\r\n            height: Math.round(obj.height)\r\n        }\r\n    },\r\n    position: function () {\r\n        if (!this.length) return\r\n\r\n        var elem = this[0],\r\n            // Get *real* offsetParent\r\n            offsetParent = this.offsetParent(),\r\n            // Get correct offsets\r\n            offset = this.offset(),\r\n            parentOffset = rootNodeRE.test(offsetParent[0].nodeName) ? { top: 0, left: 0 } : offsetParent.offset()\r\n\r\n        // Subtract element margins\r\n        // note: when an element has margin: auto the offsetLeft and marginLeft\r\n        // are the same in Safari causing offset.left to incorrectly be 0\r\n        offset.top -= parseFloat(D(elem).css('margin-top')) || 0\r\n        offset.left -= parseFloat(D(elem).css('margin-left')) || 0\r\n\r\n        // Add offsetParent borders\r\n        parentOffset.top += parseFloat(D(offsetParent[0]).css('border-top-width')) || 0\r\n        parentOffset.left += parseFloat(D(offsetParent[0]).css('border-left-width')) || 0\r\n\r\n        // Subtract the two offsets\r\n        return {\r\n            top: offset.top - parentOffset.top,\r\n            left: offset.left - parentOffset.left\r\n        }\r\n    },\r\n    scrollTop: function (value) {\r\n        if (!this.length) return\r\n        var hasScrollTop = 'scrollTop' in this[0]\r\n        if (value === undefined) return hasScrollTop ? this[0].scrollTop : this[0].pageYOffset\r\n        return this.each(hasScrollTop ?\r\n            function () { this.scrollTop = value } :\r\n            function () { this.scrollTo(this.scrollX, value) })\r\n    },\r\n    scrollLeft: function (value) {\r\n        if (!this.length) return\r\n        var hasScrollLeft = 'scrollLeft' in this[0]\r\n        if (value === undefined) return hasScrollLeft ? this[0].scrollLeft : this[0].pageXOffset\r\n        return this.each(hasScrollLeft ?\r\n            function () { this.scrollLeft = value } :\r\n            function () { this.scrollTo(value, this.scrollY) })\r\n    },\r\n\r\n    /* DOM */\r\n    remove: function () {\r\n        return this.each(function () {\r\n            if (this.parentNode != null)\r\n                this.parentNode.removeChild(this)\r\n        })\r\n    },\r\n    empty: function () {\r\n        return this.each(function () { this.innerHTML = '' })\r\n    },\r\n    clone: function () {\r\n        return this.map(function () { return this.cloneNode(true) })\r\n    },\r\n    wrap: function (structure) {\r\n        var func = isFunction(structure)\r\n        if (this[0] && !func)\r\n            var dom = D(structure).get(0),\r\n                clone = dom.parentNode || this.length > 1\r\n\r\n        return this.each(function (index) {\r\n            D(this).wrapAll(\r\n                func ? structure.call(this, index) :\r\n                    clone ? dom.cloneNode(true) : dom\r\n            )\r\n        })\r\n    },\r\n    wrapAll: function (structure) {\r\n        if (this[0]) {\r\n            D(this[0]).before(structure = D(structure))\r\n            var children\r\n            // drill down to the inmost element\r\n            while ((children = structure.children()).length) structure = children.first()\r\n            D(structure).append(this)\r\n        }\r\n        return this\r\n    },\r\n    wrapInner: function (structure) {\r\n        var func = isFunction(structure)\r\n        return this.each(function (index) {\r\n            var self = D(this),\r\n                contents = self.contents(),\r\n                dom = func ? structure.call(this, index) : structure\r\n            contents.length ? contents.wrapAll(dom) : self.append(dom)\r\n        })\r\n    },\r\n    unwrap: function () {\r\n        this.parent().each(function () {\r\n            D(this).replaceWith(D(this).children())\r\n        })\r\n        return this\r\n    },\r\n    replaceWith: function (newContent) {\r\n        return this.before(newContent).remove()\r\n    },\r\n\r\n    /* Miscellaneous */\r\n    toArray: function () {\r\n        return this.get()\r\n    },\r\n    each: function (callback) {\r\n        emptyArray.every.call(this, function (el, idx) {\r\n            return callback.call(el, idx, el) !== false\r\n        })\r\n        return this\r\n    },\r\n    map: function (fn) {\r\n        return D(\r\n            D.map(this, function (el, i) { return fn.call(el, i, el) })\r\n        )\r\n    },\r\n    get: function (idx) {\r\n        return idx === undefined ? slice.call(this) : this[idx >= 0 ? idx : idx + this.length]\r\n    },\r\n    size: function () {\r\n        return this.length\r\n    },\r\n    index: function (element) {\r\n        return element ? this.indexOf(D(element)[0]) : this.parent().children().indexOf(this[0])\r\n    },\r\n\r\n    /* Events */\r\n    ready: function (callback) {\r\n        // don't use \"interactive\" on IE <= 10 (it can fired premature)\r\n        if (document.readyState === \"complete\" ||\r\n            (document.readyState !== \"loading\" && !document.documentElement.doScroll))\r\n            setTimeout(function () { callback(D) }, 0)\r\n        else {\r\n            var handler = function () {\r\n                document.removeEventListener(\"DOMContentLoaded\", handler, false)\r\n                window.removeEventListener(\"load\", handler, false)\r\n                callback(D)\r\n            }\r\n            document.addEventListener(\"DOMContentLoaded\", handler, false)\r\n            window.addEventListener(\"load\", handler, false)\r\n        }\r\n        return this\r\n    },\r\n\r\n    /* Data */\r\n    data: function (name, value) {\r\n        var attrName = 'data-' + name.replace(capitalRE, '-$1').toLowerCase()\r\n\r\n        var data = (1 in arguments) ?\r\n            this.attr(attrName, value) :\r\n            this.attr(attrName)\r\n\r\n        return data !== null ? deserializeValue(data) : undefined\r\n    },\r\n\r\n    /* Effects */\r\n    show: function () {\r\n        return this.each(function () {\r\n            this.style.display == \"none\" && (this.style.display = '')\r\n            if (getComputedStyle(this, '').getPropertyValue(\"display\") == \"none\")\r\n                this.style.display = defaultDisplay(this.nodeName)\r\n        })\r\n    },\r\n    hide: function () {\r\n        return this.css(\"display\", \"none\")\r\n    },\r\n});\r\n\r\ndimensions.forEach(function (dimension) {\r\n    var dimensionProperty =\r\n        dimension.replace(/./, function (m) { return m[0].toUpperCase() })\r\n\r\n    D.fn[dimension] = function (value) {\r\n        var offset, el = this[0]\r\n        if (value === undefined) return isWindow(el)\r\n            ? el['inner' + dimensionProperty]\r\n            : isDocument(el)\r\n                ? el.documentElement['scroll' + dimensionProperty]\r\n                : parseFloat(this.css(dimension))\r\n        else return this.each(function (idx) {\r\n            el = D(this)\r\n            el.css(dimension, funcArg(this, value, idx, el[dimension]()))\r\n        })\r\n    }\r\n})\r\n\r\nfunction traverseNode(node, fn) {\r\n    fn(node)\r\n    for (var i = 0, len = node.childNodes.length; i < len; i++)\r\n        traverseNode(node.childNodes[i], fn)\r\n}\r\n\r\n// Generate the `after`, `prepend`, `before`, `append`,\r\n// `insertAfter`, `insertBefore`, `appendTo`, and `prependTo` methods.\r\nadjacencyOperators.forEach(function (operator, operatorIndex) {\r\n    var inside = operatorIndex % 2 //=> prepend, append\r\n\r\n    D.fn[operator] = function () {\r\n        // arguments can be nodes, arrays of nodes, D objects and HTML strings\r\n        var argType,\r\n            nodes = D.map(arguments, function (arg) {\r\n                var arr = []\r\n                argType = type(arg)\r\n                if (argType == \"array\") {\r\n                    arg.forEach(function (el) {\r\n                        if (el.nodeType !== undefined) return arr.push(el)\r\n                        else if (D.isD(el)) return arr = arr.concat(el.get())\r\n                        arr = arr.concat(D.fragment(el))\r\n                    })\r\n                    return arr\r\n                }\r\n\r\n                return argType == \"object\" || arg == null\r\n                    ? arg\r\n                    : D.fragment(arg)\r\n            }),\r\n            parent,\r\n            copyByClone = this.length > 1;\r\n\r\n        if (nodes.length < 1) return this\r\n\r\n        return this.each(function (_, target) {\r\n            parent = inside ? target : target.parentNode\r\n\r\n            // convert all methods to a \"before\" operation\r\n            target = operatorIndex == 0\r\n                ? target.nextSibling\r\n                : operatorIndex == 1\r\n                    ? target.firstChild\r\n                    : operatorIndex == 2\r\n                        ? target : null\r\n\r\n            var parentInDocument = D.contains(document.documentElement, parent)\r\n\r\n            nodes.forEach(function (node) {\r\n\r\n                if (copyByClone) {\r\n                    node = node.cloneNode(true)\r\n                } else if (!parent) {\r\n                    return D(node).remove()\r\n                }\r\n\r\n                parent.insertBefore(node, target)\r\n\r\n                if (parentInDocument) {\r\n                    traverseNode(node, function (el) {\r\n                        if (el.nodeName != null && el.nodeName.toUpperCase() === 'SCRIPT' &&\r\n                            (!el.type || el.type === 'text/javascript') && !el.src) {\r\n                            var target = el.ownerDocument ? el.ownerDocument.defaultView : window\r\n                            target['eval'].call(target, el.innerHTML)\r\n                        }\r\n                    });\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    // after    => insertAfter\r\n    // prepend  => prependTo\r\n    // before   => insertBefore\r\n    // append   => appendTo\r\n    D.fn[inside ? operator + 'To' : 'insert' + (operatorIndex ? 'Before' : 'After')] = function (html) {\r\n        D(html)[operator](this)\r\n        return this\r\n    }\r\n});\r\n\r\nD.fn.init.prototype = D.fn;\r\n","import D from './d-class';\r\n\r\nimport {\r\n  slice,\r\n  handlers,\r\n  specialEvents,\r\n  focusinSupported,\r\n  focus,\r\n  hover,\r\n  ignoreProperties,\r\n  eventMethods,\r\n} from './vars';\r\n\r\nimport {\r\n  isFunction,\r\n  isString,\r\n  returnTrue,\r\n  returnFalse\r\n} from './utils';\r\n\r\nvar _zid = 1;\r\nfunction zid(element) {\r\n  return element._zid || (element._zid = _zid++)\r\n}\r\nfunction findHandlers(element, event, fn, selector) {\r\n  event = parse(event)\r\n  if (event.ns) var matcher = matcherFor(event.ns)\r\n  return (handlers[zid(element)] || []).filter(function (handler) {\r\n    return handler\r\n      && (!event.e || handler.e == event.e)\r\n      && (!event.ns || matcher.test(handler.ns))\r\n      && (!fn || zid(handler.fn) === zid(fn))\r\n      && (!selector || handler.sel == selector)\r\n  })\r\n}\r\nfunction parse(event) {\r\n  var parts = ('' + event).split('.')\r\n  return { e: parts[0], ns: parts.slice(1).sort().join(' ') }\r\n}\r\nfunction matcherFor(ns) {\r\n  return new RegExp('(?:^| )' + ns.replace(' ', ' .* ?') + '(?: |$)')\r\n}\r\n\r\nfunction eventCapture(handler, captureSetting) {\r\n  return handler.del &&\r\n    (!focusinSupported && (handler.e in focus)) ||\r\n    !!captureSetting\r\n}\r\n\r\nfunction realEvent(type) {\r\n  return hover[type] || (focusinSupported && focus[type]) || type\r\n}\r\n\r\nfunction add(element, events, fn, data, selector, delegator, capture) {\r\n  var id = zid(element), set = (handlers[id] || (handlers[id] = []))\r\n  events.split(/\\s/).forEach(function (event) {\r\n    if (event == 'ready') return D(document).ready(fn)\r\n    var handler = parse(event)\r\n    handler.fn = fn\r\n    handler.sel = selector\r\n    // emulate mouseenter, mouseleave\r\n    if (handler.e in hover) fn = function (e) {\r\n      var related = e.relatedTarget\r\n      if (!related || (related !== this && !D.contains(this, related)))\r\n        return handler.fn.apply(this, arguments)\r\n    }\r\n    handler.del = delegator\r\n    var callback = delegator || fn\r\n    handler.proxy = function (e) {\r\n      e = compatible(e)\r\n      if (e.isImmediatePropagationStopped()) return\r\n      e.data = data\r\n      var result = callback.apply(element, e._args == undefined ? [e] : [e].concat(e._args))\r\n      if (result === false) e.preventDefault(), e.stopPropagation()\r\n      return result\r\n    }\r\n    handler.i = set.length\r\n    set.push(handler)\r\n    if ('addEventListener' in element)\r\n      element.addEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture))\r\n  })\r\n}\r\nfunction remove(element, events, fn, selector, capture) {\r\n  var id = zid(element)\r\n    ; (events || '').split(/\\s/).forEach(function (event) {\r\n      findHandlers(element, event, fn, selector).forEach(function (handler) {\r\n        delete handlers[id][handler.i]\r\n        if ('removeEventListener' in element)\r\n          element.removeEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture))\r\n      })\r\n    })\r\n}\r\n\r\nfunction compatible(event, source) {\r\n  if (source || !event.isDefaultPrevented) {\r\n    source || (source = event)\r\n\r\n    D.each(eventMethods, function (name, predicate) {\r\n      var sourceMethod = source[name]\r\n      event[name] = function () {\r\n        this[predicate] = returnTrue\r\n        return sourceMethod && sourceMethod.apply(source, arguments)\r\n      }\r\n      event[predicate] = returnFalse\r\n    })\r\n\r\n    try {\r\n      event.timeStamp || (event.timeStamp = Date.now())\r\n    } catch (ignored) { }\r\n\r\n    if (source.defaultPrevented !== undefined ? source.defaultPrevented :\r\n      'returnValue' in source ? source.returnValue === false :\r\n        source.getPreventDefault && source.getPreventDefault())\r\n      event.isDefaultPrevented = returnTrue\r\n  }\r\n  return event\r\n}\r\n\r\nfunction createProxy(event) {\r\n  var key, proxy = { originalEvent: event }\r\n  for (key in event)\r\n    if (!ignoreProperties.test(key) && event[key] !== undefined) proxy[key] = event[key]\r\n\r\n  return compatible(proxy, event)\r\n}\r\n\r\nD.event = { add: add, remove: remove }\r\n\r\nD.Event = function (type, props) {\r\n  if (!isString(type)) props = type, type = props.type\r\n  var event = document.createEvent(specialEvents[type] || 'Events'), bubbles = true\r\n  if (props) for (var name in props) (name == 'bubbles') ? (bubbles = !!props[name]) : (event[name] = props[name])\r\n  event.initEvent(type, bubbles, true)\r\n  return compatible(event)\r\n}\r\n\r\nD.proxy = function (fn, context) {\r\n  var args = (2 in arguments) && slice.call(arguments, 2)\r\n  if (isFunction(fn)) {\r\n    var proxyFn = function () { return fn.apply(context, args ? args.concat(slice.call(arguments)) : arguments) }\r\n    proxyFn._zid = zid(fn)\r\n    return proxyFn\r\n  } else if (isString(context)) {\r\n    if (args) {\r\n      args.unshift(fn[context], fn)\r\n      return D.proxy.apply(null, args)\r\n    } else {\r\n      return D.proxy(fn[context], fn)\r\n    }\r\n  } else {\r\n    throw new TypeError(\"expected function\")\r\n  }\r\n}\r\n\r\nD.fn.one = function (event, selector, data, callback) {\r\n  return this.on(event, selector, data, callback, 1)\r\n}\r\n\r\nD.fn.on = function (event, selector, data, callback, one) {\r\n  var autoRemove, delegator, $this = this\r\n  if (event && !isString(event)) {\r\n    D.each(event, function (type, fn) {\r\n      $this.on(type, selector, data, fn, one)\r\n    })\r\n    return $this\r\n  }\r\n\r\n  if (!isString(selector) && !isFunction(callback) && callback !== false)\r\n    callback = data, data = selector, selector = undefined\r\n  if (callback === undefined || data === false)\r\n    callback = data, data = undefined\r\n\r\n  if (callback === false) callback = returnFalse\r\n\r\n  return $this.each(function (_, element) {\r\n    if (one) autoRemove = function (e) {\r\n      remove(element, e.type, callback)\r\n      return callback.apply(this, arguments)\r\n    }\r\n\r\n    if (selector) delegator = function (e) {\r\n      var evt, match = D(e.target).closest(selector, element).get(0)\r\n      if (match && match !== element) {\r\n        evt = D.extend(createProxy(e), { currentTarget: match, liveFired: element })\r\n        return (autoRemove || callback).apply(match, [evt].concat(slice.call(arguments, 1)))\r\n      }\r\n    }\r\n\r\n    add(element, event, callback, data, selector, delegator || autoRemove)\r\n  })\r\n}\r\n\r\nD.fn.off = function (event, selector, callback) {\r\n  var $this = this\r\n  if (event && !isString(event)) {\r\n    D.each(event, function (type, fn) {\r\n      $this.off(type, selector, fn)\r\n    })\r\n    return $this\r\n  }\r\n\r\n  if (!isString(selector) && !isFunction(callback) && callback !== false)\r\n    callback = selector, selector = undefined\r\n\r\n  if (callback === false) callback = returnFalse\r\n\r\n  return $this.each(function () {\r\n    remove(this, event, callback, selector)\r\n  })\r\n}\r\n\r\nD.fn.trigger = function (event, args) {\r\n  event = (isString(event) || D.isPlainObject(event)) ? D.Event(event) : compatible(event)\r\n  event._args = args\r\n  return this.each(function () {\r\n    // handle focus(), blur() by calling them directly\r\n    if (event.type in focus && typeof this[event.type] == \"function\") this[event.type]()\r\n    // items in the collection might not be DOM elements\r\n    else if ('dispatchEvent' in this) this.dispatchEvent(event)\r\n    else D(this).triggerHandler(event, args)\r\n  })\r\n}\r\n\r\n// triggers event handlers on current element just as if an event occurred,\r\n// doesn't trigger an actual event, doesn't bubble\r\nD.fn.triggerHandler = function (event, args) {\r\n  var e, result\r\n  this.each(function (i, element) {\r\n    e = createProxy(isString(event) ? D.Event(event) : event)\r\n    e._args = args\r\n    e.target = element\r\n    D.each(findHandlers(element, event.type || event), function (i, handler) {\r\n      result = handler.proxy(e)\r\n      if (e.isImmediatePropagationStopped()) return false\r\n    })\r\n  })\r\n  return result\r\n}\r\n\r\n  // shortcut methods for `.on(event, fn)` for each event type\r\n  ; ('focusin focusout focus blur load resize scroll unload click dblclick ' +\r\n    'mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave ' +\r\n    'change select keydown keypress keyup error').split(' ').forEach(function (event) {\r\n      D.fn[event] = function (callback) {\r\n        return (0 in arguments) ?\r\n          this.on(event, callback) :\r\n          this.trigger(event)\r\n      }\r\n    })\r\n","import { D as $ } from './domq/index';\r\nexport default {\r\n\r\n  // Enable modal to drag\r\n  draggable: true,\r\n\r\n  // Enable modal to resize\r\n  resizable: true,\r\n\r\n  // Enable image to move\r\n  movable: true,\r\n\r\n  // Enable keyboard navigation\r\n  keyboard: true,\r\n\r\n  // Shows the title\r\n  title: true,\r\n\r\n  // Min width of modal\r\n  modalWidth: 320,\r\n\r\n  // Min height of modal\r\n  modalHeight: 320,\r\n\r\n  // Enable the page content fixed\r\n  fixedContent: true,\r\n\r\n  // Disable the modal size fixed\r\n  fixedModalSize: false,\r\n\r\n  // Disable the image viewer maximized on init\r\n  initMaximized: false,\r\n\r\n  // Threshold of modal to browser window\r\n  gapThreshold: 0.02,\r\n\r\n  // Threshold of image ratio\r\n  ratioThreshold: 0.1,\r\n\r\n  // Min ratio of image when zoom out\r\n  minRatio: 0.05,\r\n\r\n  // Max ratio of image when zoom in\r\n  maxRatio: 16,\r\n\r\n  // Toolbar options in header\r\n  headToolbar: [\r\n    'maximize',\r\n    'close'\r\n  ],\r\n\r\n  // Toolbar options in footer\r\n  footToolbar: [\r\n    'zoomIn',\r\n    'zoomOut',\r\n    'prev',\r\n    'fullscreen',\r\n    'next',\r\n    'actualSize',\r\n    'rotateRight'\r\n  ],\r\n\r\n  // Customize button icon\r\n  icons: {\r\n    minimize: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n               <path fill=\"currentColor\" d=\"M20,14H4V10H20\"></path>\r\n               </svg>`,\r\n    maximize: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n               <path fill=\"currentColor\" d=\"M4,4H20V20H4V4M6,8V18H18V8H6Z\"></path>\r\n               </svg>`,\r\n    close: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n            <path fill=\"currentColor\" d=\"M13.46,12L19,17.54V19H17.54L12,13.46\r\n            L6.46,19H5V17.54L10.54,12L5,6.46V5H6.46L12,10.54L17.54,5H19V6.46\r\n            L13.46,12Z\"></path>\r\n            </svg>`,\r\n    zoomIn: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n             <path fill=\"currentColor\" d=\"M15.5,14L20.5,19L19,20.5L14,15.5V14.71\r\n             L13.73,14.43C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,\r\n             6.5 0 0,1 9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.43,\r\n             13.73L14.71,14H15.5M9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5C7,5 5,\r\n             7 5,9.5C5,12 7,14 9.5,14M12,10H10V12H9V10H7V9H9V7H10V9H12V10Z\"></path>\r\n            </svg>`,\r\n    zoomOut: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n              <path fill=\"currentColor\" d=\"M15.5,14H14.71L14.43,13.73C15.41,\r\n              12.59 16,11.11 16,9.5A6.5,6.5 0 0,0 9.5,3A6.5,6.5 0 0,0 3,9.5A6.5,\r\n              6.5 0 0,0 9.5,16C11.11,16 12.59,15.41 13.73,14.43L14,14.71V15.5\r\n              L19,20.5L20.5,19L15.5,14M9.5,14C7,14 5,12 5,9.5C5,7 7,5 9.5,5C12,\r\n              5 14,7 14,9.5C14,12 12,14 9.5,14M7,9H12V10H7V9Z\"></path>\r\n              </svg>`,\r\n    prev: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n           <path fill=\"currentColor\" d=\"M6,18V6H8V18H6M9.5,12L18,6V18L9.5,12Z\"></path>\r\n           </svg>`,\r\n    next: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n           <path fill=\"currentColor\" d=\"M16,18H18V6H16M6,18L14.5,12L6,6V18Z\"></path>\r\n           </svg>`,\r\n    fullscreen: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n                 <path fill=\"currentColor\" d=\"M8.5,12.5L11,15.5L14.5,11L19,17H5\r\n                 M23,18V6A2,2 0 0,0 21,4H3A2,2 0 0,0 1,6V18A2,2 0 0,0 3,20H21A2,\r\n                 2 0 0,0 23,18Z\"></path>\r\n                 </svg>`,\r\n    actualSize: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n                 <path fill=\"currentColor\" d=\"M9.5,13.09L10.91,14.5L6.41,19H10V21\r\n                 H3V14H5V17.59L9.5,13.09M10.91,9.5L9.5,10.91L5,6.41V10H3V3H10V5\r\n                 H6.41L10.91,9.5M14.5,13.09L19,17.59V14H21V21H14V19H17.59L13.09,\r\n                 14.5L14.5,13.09M13.09,9.5L17.59,5H14V3H21V10H19V6.41L14.5,10.91\r\n                 L13.09,9.5Z\"></path>\r\n                </svg>`,\r\n    rotateLeft: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n                 <path fill=\"currentColor\" d=\"M13,4.07V1L8.45,5.55L13,10V6.09\r\n                 C15.84,6.57 18,9.03 18,12C18,14.97 15.84,17.43 13,17.91V19.93\r\n                 C16.95,19.44 20,16.08 20,12C20,7.92 16.95,4.56 13,4.07M7.1,18.32\r\n                 C8.26,19.22 9.61,19.76 11,19.93V17.9C10.13,17.75 9.29,17.41 8.54,\r\n                 16.87L7.1,18.32M6.09,13H4.07C4.24,14.39 4.79,15.73 5.69,16.89\r\n                 L7.1,15.47C6.58,14.72 6.23,13.88 6.09,13M7.11,8.53L5.7,7.11C4.8,\r\n                 8.27 4.24,9.61 4.07,11H6.09C6.23,10.13 6.58,9.28 7.11,8.53Z\"></path>\r\n                 </svg>`,\r\n    rotateRight: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n                  <path fill=\"currentColor\" d=\"M16.89,15.5L18.31,16.89C19.21,\r\n                  15.73 19.76,14.39 19.93,13H17.91C17.77,13.87 17.43,14.72 16.89,\r\n                  15.5M13,17.9V19.92C14.39,19.75 15.74,19.21 16.9,18.31L15.46,\r\n                  16.87C14.71,17.41 13.87,17.76 13,17.9M19.93,11C19.76,9.61 19.21,\r\n                  8.27 18.31,7.11L16.89,8.53C17.43,9.28 17.77,10.13 17.91,11M15.55,\r\n                  5.55L11,1V4.07C7.06,4.56 4,7.92 4,12C4,16.08 7.05,19.44 11,19.93\r\n                  V17.91C8.16,17.43 6,14.97 6,12C6,9.03 8.16,6.57 11,6.09V10L15.55,\r\n                  5.55Z\"></path>\r\n                  </svg>`\r\n  },\r\n\r\n  // Customize language of button title\r\n  i18n: {\r\n    minimize: 'minimize',\r\n    maximize: 'maximize',\r\n    close: 'close',\r\n    zoomIn: 'zoom-in(+)',\r\n    zoomOut: 'zoom-out(-)',\r\n    prev: 'prev(â†)',\r\n    next: 'next(â†’)',\r\n    fullscreen: 'fullscreen',\r\n    actualSize: 'actual-size(Ctrl+Alt+0)',\r\n    rotateLeft: 'rotate-left(Ctrl+,)',\r\n    rotateRight: 'rotate-right(Ctrl+.)'\r\n  },\r\n\r\n  // Enable multiple instances\r\n  multiInstances: true,\r\n\r\n  // Enable animation\r\n  initAnimation: true,\r\n\r\n  // Disable modal position fixed when change images\r\n  fixedModalPos: false,\r\n\r\n  // Modal z-index\r\n  zIndex: 1090,\r\n\r\n  // Selector of drag handler\r\n  dragHandle: false,\r\n\r\n  // Callback events\r\n  callbacks: {\r\n    beforeOpen: $.noop,\r\n    opened: $.noop,\r\n    beforeClose: $.noop,\r\n    closed: $.noop,\r\n    beforeChange: $.noop,\r\n    changed: $.noop\r\n  },\r\n\r\n  // Start images index\r\n  index: 0,\r\n\r\n  // Load the image progressively\r\n  progressiveLoading: true\r\n\r\n}\r\n","import { D as $ } from './domq/index';\r\n/**\r\n * [getImgSrc]\r\n * @param {[Object]}  el    [description]\r\n */\r\nexport function getImgSrc(el) {\r\n  // Get data-src as image src at first\r\n  let src = $(el).attr('data-src')\r\n    ? $(el).attr('data-src')\r\n    : $(el).attr('href');\r\n  return src;\r\n}\r\n\r\n/**\r\n * [throttle]\r\n * @param  {Function} fn    [description]\r\n * @param  {[Number]} delay [description]\r\n * @return {Function}       [description]\r\n */\r\nexport function throttle(fn, delay) {\r\n\r\n  let timer = null;\r\n\r\n  return function () {\r\n    let context = this,\r\n      args = arguments;\r\n\r\n    clearTimeout(timer);\r\n\r\n    timer = setTimeout(function () {\r\n      fn.apply(context, args);\r\n    }, delay);\r\n  };\r\n\r\n}\r\n\r\n/**\r\n * [preloadImg]\r\n * @param  {[String]}  src      [image src]\r\n * @param  {Function}  success  [callbacks]\r\n * @param  {Function}  error    [callbacks]\r\n */\r\nexport function preloadImg(src, success, error) {\r\n\r\n  let img = new Image();\r\n\r\n  img.onload = function () {\r\n    success(img);\r\n  };\r\n\r\n  img.onerror = function () {\r\n    error(img);\r\n  };\r\n\r\n  img.src = src;\r\n\r\n}\r\n\r\n/**\r\n * [requestFullscreen]\r\n * @param  {[type]} element [description]\r\n */\r\nexport function requestFullscreen(element) {\r\n  if (element.requestFullscreen) {\r\n    element.requestFullscreen();\r\n  } else if (element.mozRequestFullScreen) {\r\n    element.mozRequestFullScreen();\r\n  } else if (element.webkitRequestFullscreen) {\r\n    element.webkitRequestFullscreen();\r\n  } else if (element.msRequestFullscreen) {\r\n    element.msRequestFullscreen();\r\n  }\r\n}\r\n\r\n/**\r\n * [exitFullscreen]\r\n */\r\nexport function exitFullscreen() {\r\n  if (document.exitFullscreen) {\r\n    document.exitFullscreen();\r\n  } else if (document.mozCancelFullScreen) {\r\n    document.mozCancelFullScreen();\r\n  } else if (document.webkitExitFullscreen) {\r\n    document.webkitExitFullscreen();\r\n  }\r\n}\r\n\r\n/**\r\n * [getImageNameFromUrl]\r\n * @param  {[String]} url [description]\r\n * @return {[String]}     [description]\r\n */\r\nexport function getImageNameFromUrl(url) {\r\n  let reg = /^.*?\\/*([^/?]*)\\.[a-z]+(\\?.+|$)/ig,\r\n    txt = url.replace(reg, '$1');\r\n  return txt;\r\n}\r\n\r\n/**\r\n * [getNumFromCSSValue]\r\n * @param  {[String]} value [description]\r\n * @return {[Number]}       [description]\r\n */\r\nexport function getNumFromCSSValue(value) {\r\n  let reg = /\\d+/g,\r\n    arr = value.match(reg),\r\n    num = parseFloat(arr[0]);\r\n  return num;\r\n}\r\n\r\n/**\r\n * [hasScrollbar]\r\n * @return {[Boolean]}       [description]\r\n */\r\nexport function hasScrollbar() {\r\n  return document.body.scrollHeight > (window.innerHeight || document.documentElement.clientHeight);\r\n}\r\n\r\n/**\r\n * [getScrollbarWidth]\r\n * @return {[Number]}       [description]\r\n */\r\nexport function getScrollbarWidth() {\r\n\r\n  let scrollDiv = document.createElement('div');\r\n  scrollDiv.style.cssText = 'width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;';\r\n  document.body.appendChild(scrollDiv);\r\n  let scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\r\n  document.body.removeChild(scrollDiv);\r\n\r\n  return scrollbarWidth;\r\n\r\n}\r\n\r\n/**\r\n * [setGrabCursor]\r\n * @param {[Object]}  imageData    [description]\r\n * @param {[Object]}  stageData    [description]\r\n * @param {[Object]}  stage        [description]\r\n * @param {[Boolean]} isRotate     [description]\r\n */\r\nexport function setGrabCursor(imageData, stageData, stage, isRotated) {\r\n\r\n  let imageWidth = !isRotated ? imageData.w : imageData.h,\r\n    imageHeight = !isRotated ? imageData.h : imageData.w;\r\n\r\n  if (imageHeight > stageData.h || imageWidth > stageData.w) {\r\n    stage.addClass('is-grab');\r\n  }\r\n  if (imageHeight <= stageData.h && imageWidth <= stageData.w) {\r\n    stage.removeClass('is-grab');\r\n  }\r\n}\r\n\r\n/**\r\n * [supportTouch]\r\n * @return {[Boolean]}     [description]\r\n */\r\nexport function supportTouch() {\r\n  return !!(('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch);\r\n}\r\n","import { D as $ } from './domq/index';\nimport defaults from './defaults';\nimport { supportTouch } from './utilities';\n\nexport const $W = $(window);\nexport const $D = $(document);\n\nexport const CLICK_EVENT = 'click';\nexport const RESIZE_EVENT = 'resize';\nexport const KEYDOWN_EVENT = 'keydown';\nexport const WHEEL_EVENT = 'wheel mousewheel DOMMouseScroll';\n\nexport const TOUCH_START_EVENT = supportTouch() ? 'touchstart' : 'mousedown';\nexport const TOUCH_MOVE_EVENT = supportTouch() ? 'touchmove' : 'mousemove';\nexport const TOUCH_END_EVENT = supportTouch() ? 'touchend' : 'mouseup';\n\nexport const NS = 'photoviewer';\nexport const CLASS_NS = '.' + NS;\nexport const EVENT_NS = '.' + NS;\n\nexport const PUBLIC_VARS = {\n  // image moving flag\n  isMoving: false,\n  // modal resizing flag\n  isResizing: false,\n  // modal z-index setting\n  zIndex: defaults.zIndex,\n};\n","import { D as $ } from './domq/index';\r\nimport {\r\n  $D,\r\n  TOUCH_START_EVENT,\r\n  TOUCH_MOVE_EVENT,\r\n  TOUCH_END_EVENT,\r\n  EVENT_NS,\r\n  PUBLIC_VARS\r\n} from './constants';\r\n\r\nexport default {\r\n\r\n  /**\r\n   * [draggable]\r\n   * @param  {[Object]} modal       [the modal element]\r\n   * @param  {[Object]} dragHandle  [the handle element when dragging]\r\n   * @param  {[Object]} dragCancel  [the cancel element when dragging]\r\n   */\r\n  draggable(modal, dragHandle, dragCancel) {\r\n\r\n    let isDragging = false;\r\n\r\n    let startX = 0,\r\n      startY = 0,\r\n\r\n      left = 0,\r\n      top = 0;\r\n\r\n    let dragStart = (e) => {\r\n\r\n      e = e || window.event;\r\n\r\n      // Must be removed\r\n      // e.preventDefault();\r\n\r\n      if (this.options.multiInstances) {\r\n        modal.css('z-index', ++PUBLIC_VARS['zIndex']);\r\n      }\r\n\r\n      // Get clicked button\r\n      let elemCancel = $(e.target).closest(dragCancel);\r\n      // Stop modal moving when click buttons\r\n      if (elemCancel.length) {\r\n        return true;\r\n      }\r\n\r\n      isDragging = true;\r\n\r\n      startX = e.type === 'touchstart'\r\n        ? e.targetTouches[0].pageX\r\n        : e.clientX;\r\n      startY = e.type === 'touchstart'\r\n        ? e.targetTouches[0].pageY\r\n        : e.clientY;\r\n\r\n      left = $(modal).offset().left;\r\n      top = $(modal).offset().top;\r\n\r\n      $D.on(TOUCH_MOVE_EVENT + EVENT_NS, dragMove)\r\n        .on(TOUCH_END_EVENT + EVENT_NS, dragEnd);\r\n\r\n    };\r\n\r\n    let dragMove = (e) => {\r\n\r\n      e = e || window.event;\r\n\r\n      e.preventDefault();\r\n\r\n      if (isDragging && !PUBLIC_VARS['isMoving'] && !PUBLIC_VARS['isResizing'] && !this.isMaximized) {\r\n\r\n        let endX = e.type === 'touchmove'\r\n          ? e.targetTouches[0].pageX\r\n          : e.clientX,\r\n          endY = e.type === 'touchmove'\r\n            ? e.targetTouches[0].pageY\r\n            : e.clientY,\r\n\r\n          relativeX = endX - startX,\r\n          relativeY = endY - startY;\r\n\r\n        $(modal).css({\r\n          left: relativeX + left + 'px',\r\n          top: relativeY + top + 'px'\r\n        });\r\n\r\n      }\r\n\r\n    };\r\n\r\n    let dragEnd = () => {\r\n\r\n      $D.off(TOUCH_MOVE_EVENT + EVENT_NS, dragMove)\r\n        .off(TOUCH_END_EVENT + EVENT_NS, dragEnd);\r\n\r\n      isDragging = false;\r\n\r\n    };\r\n\r\n    $(dragHandle).on(TOUCH_START_EVENT + EVENT_NS, dragStart);\r\n\r\n  }\r\n\r\n}\r\n","import { D as $ } from './domq/index';\r\nimport {\r\n  $D,\r\n  TOUCH_START_EVENT,\r\n  TOUCH_MOVE_EVENT,\r\n  TOUCH_END_EVENT,\r\n  NS,\r\n  EVENT_NS,\r\n  PUBLIC_VARS\r\n} from './constants';\r\n\r\nconst ELEMS_WITH_GRABBING_CURSOR = `html,body,.${NS}-modal,.${NS}-stage,.${NS}-button,.${NS}-resizable-handle`;\r\n\r\nexport default {\r\n\r\n  /**\r\n   * --------------------------------------\r\n   * 1.no movable\r\n   * 2.vertical movable\r\n   * 3.horizontal movable\r\n   * 4.vertical & horizontal movable\r\n   * --------------------------------------\r\n   *\r\n   * [image movable]\r\n   * @param  {[Object]} stage   [the stage element]\r\n   * @param  {[Object]} image   [the image element]\r\n   */\r\n  movable(stage, image) {\r\n\r\n    let isDragging = false;\r\n\r\n    let startX = 0,\r\n      startY = 0,\r\n\r\n      left = 0,\r\n      top = 0,\r\n\r\n      widthDiff = 0,\r\n      heightDiff = 0,\r\n\r\n      Î´ = 0;\r\n\r\n    let dragStart = (e) => {\r\n\r\n      e = e || window.event;\r\n\r\n      e.preventDefault();\r\n\r\n      let imageWidth = $(image).width(),\r\n        imageHeight = $(image).height(),\r\n        stageWidth = $(stage).width(),\r\n        stageHeight = $(stage).height();\r\n\r\n      startX = e.type === 'touchstart'\r\n        ? e.targetTouches[0].pageX\r\n        : e.clientX;\r\n      startY = e.type === 'touchstart'\r\n        ? e.targetTouches[0].pageY\r\n        : e.clientY;\r\n\r\n      // Î´ is the difference between image width and height\r\n      Î´ = !this.isRotated ? 0 : (imageWidth - imageHeight) / 2;\r\n\r\n      // Width or height difference can be use to limit image right or top position\r\n      widthDiff = !this.isRotated\r\n        ? (imageWidth - stageWidth)\r\n        : (imageHeight - stageWidth);\r\n      heightDiff = !this.isRotated\r\n        ? (imageHeight - stageHeight)\r\n        : (imageWidth - stageHeight);\r\n\r\n      // Modal can be dragging if image is smaller to stage\r\n      isDragging = (widthDiff > 0 || heightDiff > 0) ? true : false;\r\n      PUBLIC_VARS['isMoving'] = (widthDiff > 0 || heightDiff > 0) ? true : false;\r\n\r\n      // Reclac the element position when mousedown\r\n      // Fixed the issue of stage with a border\r\n      left = $(image).position().left - Î´;\r\n      top = $(image).position().top + Î´;\r\n\r\n      // Add grabbing cursor\r\n      if (stage.hasClass('is-grab')) {\r\n        $(ELEMS_WITH_GRABBING_CURSOR).addClass('is-grabbing');\r\n      }\r\n\r\n      $D.on(TOUCH_MOVE_EVENT + EVENT_NS, dragMove)\r\n        .on(TOUCH_END_EVENT + EVENT_NS, dragEnd);\r\n\r\n    };\r\n\r\n    let dragMove = (e) => {\r\n\r\n      e = e || window.event;\r\n\r\n      e.preventDefault();\r\n\r\n      if (isDragging) {\r\n\r\n        let endX = e.type === 'touchmove'\r\n          ? e.targetTouches[0].pageX\r\n          : e.clientX,\r\n          endY = e.type === 'touchmove'\r\n            ? e.targetTouches[0].pageY\r\n            : e.clientY,\r\n\r\n          relativeX = endX - startX,\r\n          relativeY = endY - startY,\r\n\r\n          newLeft = relativeX + left,\r\n          newTop = relativeY + top;\r\n\r\n        // vertical limit\r\n        if (heightDiff > 0) {\r\n\r\n          if ((relativeY + top) > Î´) {\r\n            newTop = Î´;\r\n          } else if ((relativeY + top) < -heightDiff + Î´) {\r\n            newTop = -heightDiff + Î´;\r\n          }\r\n\r\n        } else {\r\n          newTop = top;\r\n        }\r\n        // horizontal limit\r\n        if (widthDiff > 0) {\r\n\r\n          if ((relativeX + left) > -Î´) {\r\n            newLeft = -Î´;\r\n          } else if ((relativeX + left) < -widthDiff - Î´) {\r\n            newLeft = -widthDiff - Î´;\r\n          }\r\n\r\n        } else {\r\n          newLeft = left;\r\n        }\r\n\r\n        $(image).css({\r\n          left: newLeft + 'px',\r\n          top: newTop + 'px'\r\n        });\r\n\r\n        // Update image initial data\r\n        $.extend(this.imageData, {\r\n          left: newLeft,\r\n          top: newTop\r\n        });\r\n\r\n      }\r\n\r\n    };\r\n\r\n    let dragEnd = () => {\r\n\r\n      $D.off(TOUCH_MOVE_EVENT + EVENT_NS, dragMove)\r\n        .off(TOUCH_END_EVENT + EVENT_NS, dragEnd);\r\n\r\n      isDragging = false;\r\n      PUBLIC_VARS['isMoving'] = false;\r\n\r\n      // Remove grabbing cursor\r\n      $(ELEMS_WITH_GRABBING_CURSOR).removeClass('is-grabbing');\r\n\r\n    };\r\n\r\n    $(stage).on(TOUCH_START_EVENT + EVENT_NS, dragStart);\r\n\r\n  }\r\n\r\n}\r\n","import { D as $ } from './domq/index';\r\nimport {\r\n  $D,\r\n  TOUCH_START_EVENT,\r\n  TOUCH_MOVE_EVENT,\r\n  TOUCH_END_EVENT,\r\n  NS,\r\n  EVENT_NS,\r\n  PUBLIC_VARS\r\n} from './constants';\r\n\r\nimport {\r\n  setGrabCursor\r\n} from './utilities';\r\n\r\nconst ELEMS_WITH_RESIZE_CURSOR = `html,body,.${NS}-modal,.${NS}-stage,.${NS}-button`;\r\n\r\nexport default {\r\n\r\n  /**\r\n   * ------------------------------\r\n   * 1.modal resizable\r\n   * 2.keep image in stage center\r\n   * 3.other image limitations\r\n   * ------------------------------\r\n   *\r\n   * [resizable]\r\n   * @param  {[Object]} modal       [the modal element]\r\n   * @param  {[Object]} stage       [the stage element]\r\n   * @param  {[Object]} image       [the image element]\r\n   * @param  {[Number]} minWidth    [the option of modalWidth]\r\n   * @param  {[Number]} minHeight   [the option of modalHeight]\r\n   */\r\n  resizable(modal, stage, image, minWidth, minHeight) {\r\n\r\n    let resizableHandleE = $(`<div class=\"${NS}-resizable-handle ${NS}-resizable-handle-e\"></div>`),\r\n      resizableHandleW = $(`<div class=\"${NS}-resizable-handle ${NS}-resizable-handle-w\"></div>`),\r\n      resizableHandleS = $(`<div class=\"${NS}-resizable-handle ${NS}-resizable-handle-s\"></div>`),\r\n      resizableHandleN = $(`<div class=\"${NS}-resizable-handle ${NS}-resizable-handle-n\"></div>`),\r\n      resizableHandleSE = $(`<div class=\"${NS}-resizable-handle ${NS}-resizable-handle-se\"></div>`),\r\n      resizableHandleSW = $(`<div class=\"${NS}-resizable-handle ${NS}-resizable-handle-sw\"></div>`),\r\n      resizableHandleNE = $(`<div class=\"${NS}-resizable-handle ${NS}-resizable-handle-ne\"></div>`),\r\n      resizableHandleNW = $(`<div class=\"${NS}-resizable-handle ${NS}-resizable-handle-nw\"></div>`);\r\n\r\n    let resizableHandles = {\r\n      'e': resizableHandleE,\r\n      's': resizableHandleS,\r\n      'se': resizableHandleSE,\r\n      'n': resizableHandleN,\r\n      'w': resizableHandleW,\r\n      'nw': resizableHandleNW,\r\n      'ne': resizableHandleNE,\r\n      'sw': resizableHandleSW\r\n    };\r\n\r\n    $(modal).append(\r\n      resizableHandleE, resizableHandleW, resizableHandleS, resizableHandleN,\r\n      resizableHandleSE, resizableHandleSW, resizableHandleNE, resizableHandleNW\r\n    );\r\n\r\n    let isDragging = false;\r\n\r\n    let startX = 0,\r\n      startY = 0,\r\n\r\n      modalData = {\r\n        w: 0,\r\n        h: 0,\r\n        l: 0,\r\n        t: 0\r\n      },\r\n      stageData = {\r\n        w: 0,\r\n        h: 0,\r\n        l: 0,\r\n        t: 0\r\n      },\r\n      imageData = {\r\n        w: 0,\r\n        h: 0,\r\n        l: 0,\r\n        t: 0\r\n      },\r\n\r\n      // Î´ is the difference between image width and height\r\n      Î´ = 0,\r\n      imgWidth = 0,\r\n      imgHeight = 0,\r\n\r\n      direction = '';\r\n\r\n    // modal CSS options\r\n    let getModalOpts = function (dir, offsetX, offsetY) {\r\n\r\n      // Modal should not move when its width to the minwidth\r\n      let modalLeft = (-offsetX + modalData.w) > minWidth\r\n        ? (offsetX + modalData.l)\r\n        : (modalData.l + modalData.w - minWidth),\r\n        modalTop = (-offsetY + modalData.h) > minHeight\r\n          ? (offsetY + modalData.t)\r\n          : (modalData.t + modalData.h - minHeight);\r\n\r\n      let opts = {\r\n        'e': {\r\n          width: Math.max((offsetX + modalData.w), minWidth) + 'px'\r\n        },\r\n        's': {\r\n          height: Math.max((offsetY + modalData.h), minHeight) + 'px'\r\n        },\r\n        'se': {\r\n          width: Math.max((offsetX + modalData.w), minWidth) + 'px',\r\n          height: Math.max((offsetY + modalData.h), minHeight) + 'px'\r\n        },\r\n        'w': {\r\n          width: Math.max((-offsetX + modalData.w), minWidth) + 'px',\r\n          left: modalLeft + 'px'\r\n        },\r\n        'n': {\r\n          height: Math.max((-offsetY + modalData.h), minHeight) + 'px',\r\n          top: modalTop + 'px'\r\n        },\r\n        'nw': {\r\n          width: Math.max((-offsetX + modalData.w), minWidth) + 'px',\r\n          height: Math.max((-offsetY + modalData.h), minHeight) + 'px',\r\n          top: modalTop + 'px',\r\n          left: modalLeft + 'px'\r\n        },\r\n        'ne': {\r\n          width: Math.max((offsetX + modalData.w), minWidth) + 'px',\r\n          height: Math.max((-offsetY + modalData.h), minHeight) + 'px',\r\n          top: modalTop + 'px'\r\n        },\r\n        'sw': {\r\n          width: Math.max((-offsetX + modalData.w), minWidth) + 'px',\r\n          height: Math.max((offsetY + modalData.h), minHeight) + 'px',\r\n          left: modalLeft + 'px'\r\n        }\r\n      };\r\n\r\n      return opts[dir];\r\n    };\r\n\r\n    // image CSS options\r\n    let getImageOpts = function (dir, offsetX, offsetY) {\r\n\r\n      // Image should not move when modal width to the min width\r\n      // The minwidth is modal width, so we should clac the stage minwidth\r\n      let widthDiff = (offsetX + modalData.w) > minWidth\r\n        ? (stageData.w - imgWidth + offsetX - Î´)\r\n        : (minWidth - (modalData.w - stageData.w) - imgWidth - Î´),\r\n        heightDiff = (offsetY + modalData.h) > minHeight\r\n          ? (stageData.h - imgHeight + offsetY + Î´)\r\n          : (minHeight - (modalData.h - stageData.h) - imgHeight + Î´),\r\n\r\n        widthDiff2 = (-offsetX + modalData.w) > minWidth\r\n          ? (stageData.w - imgWidth - offsetX - Î´)\r\n          : (minWidth - (modalData.w - stageData.w) - imgWidth - Î´),\r\n        heightDiff2 = (-offsetY + modalData.h) > minHeight\r\n          ? (stageData.h - imgHeight - offsetY + Î´)\r\n          : (minHeight - (modalData.h - stageData.h) - imgHeight + Î´);\r\n\r\n      // Get image position in dragging\r\n      let imgLeft = (widthDiff > 0\r\n        ? $(image).position().left\r\n        : ($(image).position().left < 0\r\n          ? $(image).position().left\r\n          : 0)) - Î´,\r\n        imgTop = (heightDiff > 0\r\n          ? $(image).position().top\r\n          : ($(image).position().top < 0\r\n            ? $(image).position().top\r\n            : 0)) + Î´,\r\n\r\n        imgLeft2 = (widthDiff2 > 0\r\n          ? $(image).position().left\r\n          : ($(image).position().left < 0\r\n            ? $(image).position().left\r\n            : 0)) - Î´,\r\n        imgTop2 = (heightDiff2 > 0\r\n          ? $(image).position().top\r\n          : ($(image).position().top < 0\r\n            ? $(image).position().top\r\n            : 0)) + Î´;\r\n\r\n      let opts = {\r\n        'e': {\r\n          left: widthDiff >= -Î´\r\n            ? ((widthDiff - Î´) / 2 + 'px')\r\n            : (imgLeft > widthDiff\r\n              ? (imgLeft + 'px')\r\n              : (widthDiff + 'px'))\r\n        },\r\n        's': {\r\n          top: heightDiff >= Î´\r\n            ? ((heightDiff + Î´) / 2 + 'px')\r\n            : (imgTop > heightDiff\r\n              ? (imgTop + 'px')\r\n              : (heightDiff + 'px'))\r\n        },\r\n        'se': {\r\n          top: heightDiff >= Î´\r\n            ? ((heightDiff + Î´) / 2 + 'px')\r\n            : (imgTop > heightDiff\r\n              ? (imgTop + 'px')\r\n              : (heightDiff + 'px')),\r\n          left: widthDiff >= -Î´\r\n            ? ((widthDiff - Î´) / 2 + 'px')\r\n            : (imgLeft > widthDiff\r\n              ? (imgLeft + 'px')\r\n              : (widthDiff + 'px'))\r\n        },\r\n        'w': {\r\n          left: widthDiff2 >= -Î´\r\n            ? ((widthDiff2 - Î´) / 2 + 'px')\r\n            : (imgLeft2 > widthDiff2\r\n              ? (imgLeft2 + 'px')\r\n              : (widthDiff2 + 'px'))\r\n        },\r\n        'n': {\r\n          top: heightDiff2 >= Î´\r\n            ? ((heightDiff2 + Î´) / 2 + 'px')\r\n            : (imgTop2 > heightDiff2\r\n              ? (imgTop2 + 'px')\r\n              : (heightDiff2 + 'px'))\r\n        },\r\n        'nw': {\r\n          top: heightDiff2 >= Î´\r\n            ? ((heightDiff2 + Î´) / 2 + 'px')\r\n            : (imgTop2 > heightDiff2\r\n              ? (imgTop2 + 'px')\r\n              : (heightDiff2 + 'px')),\r\n          left: widthDiff2 >= -Î´\r\n            ? ((widthDiff2 - Î´) / 2 + 'px')\r\n            : (imgLeft2 > widthDiff2\r\n              ? (imgLeft2 + 'px')\r\n              : (widthDiff2 + 'px'))\r\n        },\r\n        'ne': {\r\n          top: heightDiff2 >= Î´\r\n            ? ((heightDiff2 + Î´) / 2 + 'px')\r\n            : (imgTop2 > heightDiff2\r\n              ? (imgTop2 + 'px')\r\n              : (heightDiff2 + 'px')),\r\n          left: widthDiff >= -Î´\r\n            ? ((widthDiff - Î´) / 2 + 'px')\r\n            : (imgLeft > widthDiff\r\n              ? (imgLeft + 'px')\r\n              : (widthDiff + 'px'))\r\n        },\r\n        'sw': {\r\n          top: heightDiff >= Î´\r\n            ? ((heightDiff + Î´) / 2 + 'px')\r\n            : (imgTop > heightDiff\r\n              ? (imgTop + 'px')\r\n              : (heightDiff + 'px')),\r\n          left: widthDiff2 >= -Î´\r\n            ? ((widthDiff2 - Î´) / 2 + 'px')\r\n            : (imgLeft2 > widthDiff2\r\n              ? (imgLeft2 + 'px')\r\n              : (widthDiff2 + 'px'))\r\n        }\r\n      };\r\n\r\n      return opts[dir];\r\n    };\r\n\r\n    let dragStart = (dir, e) => {\r\n\r\n      e = e || window.event;\r\n\r\n      e.preventDefault();\r\n\r\n      isDragging = true;\r\n      PUBLIC_VARS['isResizing'] = true;\r\n\r\n      startX = e.type === 'touchstart'\r\n        ? e.targetTouches[0].pageX\r\n        : e.clientX;\r\n      startY = e.type === 'touchstart'\r\n        ? e.targetTouches[0].pageY\r\n        : e.clientY;\r\n\r\n      // Reclac the modal data when mousedown\r\n      modalData = {\r\n        w: $(modal).width(),\r\n        h: $(modal).height(),\r\n        l: $(modal).offset().left,\r\n        t: $(modal).offset().top\r\n      };\r\n\r\n      stageData = {\r\n        w: $(stage).width(),\r\n        h: $(stage).height(),\r\n        l: $(stage).offset().left,\r\n        t: $(stage).offset().top\r\n      };\r\n\r\n      imageData = {\r\n        w: $(image).width(),\r\n        h: $(image).height(),\r\n        l: $(image).position().left,\r\n        t: $(image).position().top\r\n      };\r\n\r\n      // Î´ is the difference between image width and height\r\n      Î´ = !this.isRotated\r\n        ? 0\r\n        : (imageData.w - imageData.h) / 2;\r\n      imgWidth = !this.isRotated\r\n        ? imageData.w\r\n        : imageData.h;\r\n      imgHeight = !this.isRotated\r\n        ? imageData.h\r\n        : imageData.w;\r\n\r\n      direction = dir;\r\n\r\n      // Add resizable cursor\r\n      $(ELEMS_WITH_RESIZE_CURSOR).css('cursor', dir + '-resize');\r\n\r\n      $D.on(TOUCH_MOVE_EVENT + EVENT_NS, dragMove)\r\n        .on(TOUCH_END_EVENT + EVENT_NS, dragEnd);\r\n\r\n    };\r\n\r\n    let dragMove = (e) => {\r\n\r\n      e = e || window.event;\r\n\r\n      e.preventDefault();\r\n\r\n      if (isDragging && !this.isMaximized) {\r\n\r\n        let endX = e.type === 'touchmove'\r\n          ? e.targetTouches[0].pageX\r\n          : e.clientX,\r\n          endY = e.type === 'touchmove'\r\n            ? e.targetTouches[0].pageY\r\n            : e.clientY,\r\n\r\n          relativeX = endX - startX,\r\n          relativeY = endY - startY;\r\n\r\n        let modalOpts = getModalOpts(direction, relativeX, relativeY);\r\n\r\n        $(modal).css(modalOpts);\r\n\r\n        let imageOpts = getImageOpts(direction, relativeX, relativeY);\r\n\r\n        $(image).css(imageOpts);\r\n\r\n        this.isDoResize = true;\r\n\r\n      }\r\n\r\n    };\r\n\r\n    let dragEnd = () => {\r\n\r\n      $D.off(TOUCH_MOVE_EVENT + EVENT_NS, dragMove)\r\n        .off(TOUCH_END_EVENT + EVENT_NS, dragEnd);\r\n\r\n      // Set grab cursor\r\n      if (PUBLIC_VARS['isResizing']) {\r\n        setGrabCursor(\r\n          {\r\n            w: imgWidth,\r\n            h: imgHeight\r\n          },\r\n          {\r\n            w: $(stage).width(),\r\n            h: $(stage).height()\r\n          },\r\n          stage\r\n        );\r\n      }\r\n\r\n      isDragging = false;\r\n      PUBLIC_VARS['isResizing'] = false;\r\n\r\n      // Remove resizable cursor\r\n      $(ELEMS_WITH_RESIZE_CURSOR).css('cursor', '');\r\n\r\n      // Update image initial data\r\n      let scale = this.getImageScaleToStage(\r\n        $(stage).width(),\r\n        $(stage).height()\r\n      );\r\n\r\n      $.extend(this.imageData, {\r\n        initWidth: this.img.width * scale,\r\n        initHeight: this.img.height * scale,\r\n        initLeft: ($(stage).width() - this.img.width * scale) / 2,\r\n        initTop: ($(stage).height() - this.img.height * scale) / 2\r\n      });\r\n\r\n    };\r\n\r\n    $.each(resizableHandles, function (dir, handle) {\r\n      handle.on(TOUCH_START_EVENT + EVENT_NS, function (e) {\r\n        dragStart(dir, e);\r\n      });\r\n    });\r\n\r\n  }\r\n\r\n}\r\n","import { D as $ } from './domq/index';\r\n\r\nimport DEFAULTS from './defaults';\r\n\r\nimport {\r\n  $W,\r\n  $D,\r\n  CLICK_EVENT,\r\n  RESIZE_EVENT,\r\n  KEYDOWN_EVENT,\r\n  WHEEL_EVENT,\r\n  NS,\r\n  CLASS_NS,\r\n  EVENT_NS,\r\n  PUBLIC_VARS\r\n} from './constants';\r\n\r\nimport {\r\n  getImgSrc,\r\n  throttle,\r\n  preloadImg,\r\n  requestFullscreen,\r\n  getImageNameFromUrl,\r\n  getNumFromCSSValue,\r\n  hasScrollbar,\r\n  getScrollbarWidth,\r\n  setGrabCursor\r\n} from './utilities';\r\n\r\nimport draggable from './draggable';\r\nimport movable from './movable';\r\nimport resizable from './resizable';\r\n\r\n/**\r\n * PhotoViewer Class\r\n */\r\nclass PhotoViewer {\r\n\r\n  constructor(items, options, el) {\r\n\r\n    this.options = $.extend(true, {}, DEFAULTS, options);\r\n\r\n    if (options && $.isArray(options.footToolbar)) {\r\n      this.options.footToolbar = options.footToolbar;\r\n    }\r\n\r\n    if (options && $.isArray(options.headToolbar)) {\r\n      this.options.headToolbar = options.headToolbar;\r\n    }\r\n\r\n    // Store element of clicked\r\n    this.$el = $(el);\r\n\r\n    // As we have multiple instances,\r\n    // so every instance has following variables.\r\n\r\n    // modal open flag\r\n    this.isOpened = false;\r\n    // modal maximize flag\r\n    this.isMaximized = false;\r\n    // image rotate 90*(2n+1) flag\r\n    this.isRotated = false;\r\n    // image rotate angle\r\n    this.rotateAngle = 0;\r\n\r\n    // if modal do resize\r\n    this.isDoResize = false;\r\n\r\n    // Store image data in every instance\r\n    this.imageData = {};\r\n    // Store modal data in every instance\r\n    this.modalData = {\r\n      width: null,\r\n      height: null,\r\n      left: null,\r\n      top: null\r\n    };\r\n\r\n    this.init(items, this.options, el);\r\n\r\n  }\r\n\r\n  init(items, opts, el) {\r\n\r\n    this.groupData = items;\r\n    this.groupIndex = opts['index'];\r\n\r\n    // Get image src\r\n    let imgSrc = items[this.groupIndex]['src'];\r\n\r\n    this.open();\r\n\r\n    this.loadImg(imgSrc);\r\n\r\n    // draggable & movable & resizable\r\n    if (opts.draggable) {\r\n      this.draggable(this.$photoviewer, this.dragHandle, CLASS_NS + '-button');\r\n    }\r\n    if (opts.movable) {\r\n      this.movable(this.$stage, this.$image);\r\n    }\r\n    if (opts.resizable) {\r\n      this.resizable(\r\n        this.$photoviewer,\r\n        this.$stage,\r\n        this.$image,\r\n        opts.modalWidth,\r\n        opts.modalHeight\r\n      );\r\n    }\r\n\r\n  }\r\n\r\n  _creatBtns(toolbar, btns) {\r\n\r\n    let btnsStr = '';\r\n\r\n    $.each(toolbar, function (index, item) {\r\n      btnsStr += btns[item];\r\n    });\r\n\r\n    return btnsStr;\r\n\r\n  }\r\n\r\n  _creatTitle() {\r\n    return (this.options.title ? `<div class=\"${NS}-title\"></div>` : '');\r\n  }\r\n\r\n  _creatDOM() {\r\n\r\n    let btnsTpl = {\r\n      minimize: `<button class=\"${NS}-button ${NS}-button-minimize\"\r\n                  title=\"${this.options.i18n.minimize}\">\r\n                    ${this.options.icons.minimize}\r\n                  </button>`,\r\n      maximize: `<button class=\"${NS}-button ${NS}-button-maximize\"\r\n                  title=\"${this.options.i18n.maximize}\">\r\n                    ${this.options.icons.maximize}\r\n                  </button>`,\r\n      close: `<button class=\"${NS}-button ${NS}-button-close\"\r\n              title=\"${this.options.i18n.close}\">\r\n                ${this.options.icons.close}\r\n              </button>`,\r\n      zoomIn: `<button class=\"${NS}-button ${NS}-button-zoom-in\"\r\n                title=\"${this.options.i18n.zoomIn}\">\r\n                  ${this.options.icons.zoomIn}\r\n                </button>`,\r\n      zoomOut: `<button class=\"${NS}-button ${NS}-button-zoom-out\"\r\n                title=\"${this.options.i18n.zoomOut}\">\r\n                  ${this.options.icons.zoomOut}\r\n                </button>`,\r\n      prev: `<button class=\"${NS}-button ${NS}-button-prev\"\r\n              title=\"${this.options.i18n.prev}\">\r\n                ${this.options.icons.prev}\r\n              </button>`,\r\n      next: `<button class=\"${NS}-button ${NS}-button-next\"\r\n              title=\"${this.options.i18n.next}\">\r\n                ${this.options.icons.next}\r\n              </button>`,\r\n      fullscreen: `<button class=\"${NS}-button ${NS}-button-fullscreen\"\r\n                    title=\"${this.options.i18n.fullscreen}\">\r\n                    ${this.options.icons.fullscreen}\r\n                  </button>`,\r\n      actualSize: `<button class=\"${NS}-button ${NS}-button-actual-size\"\r\n                    title=\"${this.options.i18n.actualSize}\">\r\n                      ${this.options.icons.actualSize}\r\n                    </button>`,\r\n      rotateLeft: `<button class=\"${NS}-button ${NS}-button-rotate-left\"\r\n                    title=\"${this.options.i18n.rotateLeft}\">\r\n                      ${this.options.icons.rotateLeft}\r\n                    </button>`,\r\n      rotateRight: `<button class=\"${NS}-button ${NS}-button-rotate-right\"\r\n                      title=\"${this.options.i18n.rotateRight}\">\r\n                      ${this.options.icons.rotateRight}\r\n                    </button>`\r\n    };\r\n\r\n    // photoviewer base HTML\r\n    let photoviewerHTML =\r\n      `<div class=\"${NS}-modal\">\r\n        <div class=\"${NS}-inner\">\r\n          <div class=\"${NS}-header\">\r\n            <div class=\"${NS}-toolbar ${NS}-toolbar-head\">\r\n              ${this._creatBtns(this.options.headToolbar, btnsTpl)}\r\n            </div>\r\n            ${this._creatTitle()}\r\n          </div>\r\n          <div class=\"${NS}-stage\">\r\n            <img class=\"${NS}-image\" src=\"\" alt=\"\" />\r\n          </div>\r\n          <div class=\"${NS}-footer\">\r\n            <div class=\"${NS}-toolbar ${NS}-toolbar-foot\">\r\n              ${this._creatBtns(this.options.footToolbar, btnsTpl)}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>`;\r\n\r\n    return photoviewerHTML;\r\n\r\n  }\r\n\r\n  build() {\r\n\r\n    // Create photoviewer HTML string\r\n    let photoviewerHTML = this._creatDOM();\r\n\r\n    // Make photoviewer HTML string to jQuery element\r\n    let $photoviewer = $(photoviewerHTML);\r\n\r\n    // Get all photoviewer element\r\n    this.$photoviewer = $photoviewer;\r\n    this.$header = $photoviewer.find(CLASS_NS + '-header');\r\n    this.$headToolbar = $photoviewer.find(CLASS_NS + '-toolbar-head');\r\n    this.$footer = $photoviewer.find(CLASS_NS + '-footer');\r\n    this.$footToolbar = $photoviewer.find(CLASS_NS + '-toolbar-foot');\r\n    this.$stage = $photoviewer.find(CLASS_NS + '-stage');\r\n    this.$title = $photoviewer.find(CLASS_NS + '-title');\r\n    this.$image = $photoviewer.find(CLASS_NS + '-image');\r\n    this.$close = $photoviewer.find(CLASS_NS + '-button-close');\r\n    this.$maximize = $photoviewer.find(CLASS_NS + '-button-maximize');\r\n    this.$minimize = $photoviewer.find(CLASS_NS + '-button-minimize');\r\n    this.$zoomIn = $photoviewer.find(CLASS_NS + '-button-zoom-in');\r\n    this.$zoomOut = $photoviewer.find(CLASS_NS + '-button-zoom-out');\r\n    this.$actualSize = $photoviewer.find(CLASS_NS + '-button-actual-size');\r\n    this.$fullscreen = $photoviewer.find(CLASS_NS + '-button-fullscreen');\r\n    this.$rotateLeft = $photoviewer.find(CLASS_NS + '-button-rotate-left');\r\n    this.$rotateRight = $photoviewer.find(CLASS_NS + '-button-rotate-right');\r\n    this.$prev = $photoviewer.find(CLASS_NS + '-button-prev');\r\n    this.$next = $photoviewer.find(CLASS_NS + '-button-next');\r\n\r\n    // Add class before image loaded\r\n    this.$stage.addClass('stage-ready');\r\n    this.$image.addClass('image-ready');\r\n\r\n    // Reset modal z-index with multiple instances\r\n    this.$photoviewer.css('z-index', PUBLIC_VARS['zIndex']);\r\n\r\n    // Set handle element of draggable\r\n    if (!this.options.dragHandle || this.options.dragHandle === CLASS_NS + '-modal') {\r\n      this.dragHandle = this.$photoviewer;\r\n    } else {\r\n      this.dragHandle = this.$photoviewer.find(this.options.dragHandle);\r\n    }\r\n\r\n  }\r\n\r\n  open() {\r\n\r\n    if (!this.options.multiInstances) {\r\n      $(CLASS_NS + '-modal').eq(0).remove();\r\n    }\r\n\r\n    // Fixed modal position bug\r\n    if (!$(CLASS_NS + '-modal').length && this.options.fixedContent) {\r\n\r\n      $('html').css({ 'overflow': 'hidden' });\r\n\r\n      if (hasScrollbar()) {\r\n        let scrollbarWidth = getScrollbarWidth();\r\n        if (scrollbarWidth) {\r\n          $('html').css({ 'padding-right': scrollbarWidth });\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    this.build();\r\n\r\n    this._triggerHook('beforeOpen', this.$el);\r\n\r\n    // Add PhotoViewer to DOM\r\n    $('body').append(this.$photoviewer);\r\n\r\n    this.addEvents();\r\n\r\n    this.setModalPos(this.$photoviewer);\r\n\r\n    this._triggerHook('opened', this.$el);\r\n\r\n  }\r\n\r\n  close() {\r\n\r\n    this._triggerHook('beforeClose', this.$el);\r\n\r\n    // Remove instance\r\n    this.$photoviewer.remove();\r\n\r\n    this.isOpened = false;\r\n    this.isMaximized = false;\r\n    this.isRotated = false;\r\n    this.rotateAngle = 0;\r\n\r\n    let zeroModal = !$(CLASS_NS + '-modal').length;\r\n\r\n    // Fixed modal position bug\r\n    if (zeroModal && this.options.fixedContent) {\r\n      $('html').css({ 'overflow': '', 'padding-right': '' });\r\n    }\r\n\r\n    // Reset zIndex after close\r\n    if (zeroModal && this.options.multiInstances) {\r\n      PUBLIC_VARS['zIndex'] = this.options.zIndex;\r\n    }\r\n\r\n    // off events\r\n    if (!$(CLASS_NS + '-modal').length) {\r\n      $D.off(KEYDOWN_EVENT + EVENT_NS);\r\n      $W.off(RESIZE_EVENT + EVENT_NS);\r\n    }\r\n\r\n    this._triggerHook('closed', this.$el);\r\n\r\n  }\r\n\r\n  setModalPos(modal) {\r\n\r\n    let winWidth = $W.width(),\r\n      winHeight = $W.height(),\r\n      scrollLeft = document.documentElement.scrollLeft,\r\n      scrollTop = document.documentElement.scrollTop;\r\n\r\n    let modalWidth = this.options.modalWidth,\r\n      modalHeight = this.options.modalHeight;\r\n\r\n    // Set modal maximized when init\r\n    if (this.options.initMaximized) {\r\n\r\n      modal.addClass(NS + '-maximize');\r\n\r\n      modal.css({\r\n        width: '100%',\r\n        height: '100%',\r\n        left: 0,\r\n        top: 0\r\n      });\r\n\r\n      this.isOpened = true;\r\n      this.isMaximized = true;\r\n\r\n    } else {\r\n\r\n      // Make the modal in windows center\r\n      modal.css({\r\n        width: modalWidth,\r\n        height: modalHeight,\r\n        left: (winWidth - modalWidth) / 2 + scrollLeft + 'px',\r\n        top: (winHeight - modalHeight) / 2 + scrollTop + 'px'\r\n      });\r\n\r\n    }\r\n\r\n  }\r\n\r\n  setModalSize(img) {\r\n\r\n    let winWidth = $W.width(),\r\n      winHeight = $W.height(),\r\n      scrollLeft = document.documentElement.scrollLeft,\r\n      scrollTop = document.documentElement.scrollTop;\r\n\r\n    // stage css value\r\n    let stageCSS = {\r\n      left: this.$stage.css('left'),\r\n      right: this.$stage.css('right'),\r\n      top: this.$stage.css('top'),\r\n      bottom: this.$stage.css('bottom'),\r\n      borderLeft: this.$stage.css('border-left-width'),\r\n      borderRight: this.$stage.css('border-right-width'),\r\n      borderTop: this.$stage.css('border-top-width'),\r\n      borderBottom: this.$stage.css('border-bottom-width')\r\n    };\r\n\r\n    // Modal size should calc with stage css value\r\n    let modalWidth = img.width +\r\n      getNumFromCSSValue(stageCSS.left) +\r\n      getNumFromCSSValue(stageCSS.right) +\r\n      getNumFromCSSValue(stageCSS.borderLeft) +\r\n      getNumFromCSSValue(stageCSS.borderRight),\r\n      modalHeight = img.height +\r\n        getNumFromCSSValue(stageCSS.top) +\r\n        getNumFromCSSValue(stageCSS.bottom) +\r\n        getNumFromCSSValue(stageCSS.borderTop) +\r\n        getNumFromCSSValue(stageCSS.borderBottom);\r\n\r\n    let gapThreshold = (this.options.gapThreshold > 0 ? this.options.gapThreshold : 0) + 1,\r\n      // modal scale to window\r\n      scale = Math.min(\r\n        winWidth / (modalWidth * gapThreshold),\r\n        winHeight / (modalHeight * gapThreshold),\r\n        1\r\n      );\r\n\r\n    let minWidth = Math.max(modalWidth * scale, this.options.modalWidth),\r\n      minHeight = Math.max(modalHeight * scale, this.options.modalHeight);\r\n\r\n    minWidth = this.options.fixedModalSize\r\n      ? this.options.modalWidth\r\n      : Math.round(minWidth);\r\n    minHeight = this.options.fixedModalSize\r\n      ? this.options.modalHeight\r\n      : Math.round(minHeight);\r\n\r\n    let modalCSSObj = {\r\n      width: minWidth + 'px',\r\n      height: minHeight + 'px',\r\n      left: (winWidth - minWidth) / 2 + scrollLeft + 'px',\r\n      top: (winHeight - minHeight) / 2 + scrollTop + 'px'\r\n    };\r\n\r\n    // Add modal init animation\r\n    if (this.options.initAnimation) {\r\n      this.$photoviewer.animate(modalCSSObj, () => {\r\n        this.setImageSize(img);\r\n      });\r\n    } else {\r\n      this.$photoviewer.css(modalCSSObj);\r\n      this.setImageSize(img);\r\n    }\r\n\r\n    this.isOpened = true;\r\n\r\n  }\r\n\r\n  getImageScaleToStage(stageWidth, stageHeight) {\r\n\r\n    var scale = 1;\r\n\r\n    if (!this.isRotated) {\r\n      scale = Math.min(stageWidth / this.img.width, stageHeight / this.img.height, 1);\r\n    } else {\r\n      scale = Math.min(stageWidth / this.img.height, stageHeight / this.img.width, 1);\r\n    }\r\n\r\n    return scale;\r\n  }\r\n\r\n  setImageSize(img) {\r\n\r\n    let stageData = {\r\n      w: this.$stage.width(),\r\n      h: this.$stage.height()\r\n    };\r\n\r\n    let scale = this.getImageScaleToStage(\r\n      stageData.w,\r\n      stageData.h\r\n    );\r\n\r\n    this.$image.css({\r\n      width: Math.ceil(img.width * scale) + 'px',\r\n      height: Math.ceil(img.height * scale) + 'px',\r\n      left: (stageData.w - Math.ceil(img.width * scale)) / 2 + 'px',\r\n      top: (stageData.h - Math.ceil(img.height * scale)) / 2 + 'px'\r\n    });\r\n\r\n    // Store image initial data\r\n    $.extend(this.imageData, {\r\n      initWidth: img.width * scale,\r\n      initHeight: img.height * scale,\r\n      initLeft: (stageData.w - img.width * scale) / 2,\r\n      initTop: (stageData.h - img.height * scale) / 2,\r\n      width: img.width * scale,\r\n      height: img.height * scale,\r\n      left: (stageData.w - img.width * scale) / 2,\r\n      top: (stageData.h - img.height * scale) / 2\r\n    });\r\n\r\n    // Set grab cursor\r\n    setGrabCursor(\r\n      {\r\n        w: this.$image.width(),\r\n        h: this.$image.height()\r\n      },\r\n      {\r\n        w: this.$stage.width(),\r\n        h: this.$stage.height()\r\n      },\r\n      this.$stage,\r\n      this.isRotated\r\n    );\r\n\r\n    this.$stage.removeClass('stage-ready');\r\n    this.$image.removeClass('image-ready');\r\n\r\n    // loader end\r\n    this.$photoviewer.find(CLASS_NS + '-loader').remove();\r\n\r\n    // Add image init animation\r\n    if (this.options.initAnimation && !this.options.progressiveLoading) {\r\n      this.$image.fadeIn();\r\n    }\r\n\r\n  }\r\n\r\n  loadImg(imgSrc, fn, err) {\r\n\r\n    let loaderHTML = `<div class=\"${NS}-loader\"></div>`;\r\n\r\n    // loader start\r\n    this.$photoviewer.append(loaderHTML);\r\n\r\n    // Add class before image loaded\r\n    this.$stage.addClass('stage-ready');\r\n    this.$image.addClass('image-ready');\r\n\r\n    // Reset image\r\n    this.$image.removeAttr('style').attr('src', '');\r\n\r\n    if (this.options.initAnimation && !this.options.progressiveLoading) {\r\n      this.$image.hide();\r\n    }\r\n\r\n    this.$image.attr('src', imgSrc);\r\n\r\n    preloadImg(imgSrc, (img) => {\r\n      // Store HTMLImageElement\r\n      this.img = img;\r\n\r\n      // Store original data\r\n      this.imageData = {\r\n        originalWidth: img.width,\r\n        originalHeight: img.height\r\n      };\r\n\r\n      if (this.isMaximized || (this.isOpened && this.options.fixedModalPos)) {\r\n        this.setImageSize(img);\r\n      } else {\r\n        this.setModalSize(img);\r\n      }\r\n\r\n      // callback of image loaded successfully\r\n      if (fn) {\r\n        fn.call();\r\n      }\r\n\r\n    }, () => {\r\n      // loader end\r\n      this.$photoviewer.find(CLASS_NS + '-loader').remove();\r\n\r\n      // callback of image loading failed\r\n      if (err) {\r\n        err.call();\r\n      }\r\n    });\r\n\r\n    if (this.options.title) {\r\n      this.setImgTitle(imgSrc);\r\n    }\r\n\r\n  }\r\n\r\n  setImgTitle(url) {\r\n\r\n    let title = this.groupData[this.groupIndex].title\r\n      ? this.groupData[this.groupIndex].title\r\n      : getImageNameFromUrl(url);\r\n\r\n    this.$title.html(title);\r\n\r\n  }\r\n\r\n  jump(step) {\r\n\r\n    this._triggerHook('beforeChange', this.groupIndex);\r\n\r\n    this.groupIndex = this.groupIndex + step;\r\n\r\n    this.jumpTo(this.groupIndex);\r\n\r\n  }\r\n\r\n  jumpTo(index) {\r\n\r\n    index = index % this.groupData.length;\r\n\r\n    if (index >= 0) {\r\n      index = index % this.groupData.length;\r\n    } else if (index < 0) {\r\n      index = (this.groupData.length + index) % this.groupData.length;\r\n    }\r\n\r\n    this.groupIndex = index;\r\n\r\n    this.loadImg(this.groupData[index].src, () => {\r\n      this._triggerHook('changed', index);\r\n    }, () => {\r\n      this._triggerHook('changed', index);\r\n    });\r\n\r\n  }\r\n\r\n  wheel(e) {\r\n\r\n    e.preventDefault();\r\n\r\n    let delta = 1;\r\n\r\n    if (e.deltaY) {\r\n      delta = e.deltaY > 0 ? 1 : -1;\r\n    } else if (e.wheelDelta) {\r\n      delta = -e.wheelDelta / 120;\r\n    } else if (e.detail) {\r\n      delta = e.detail > 0 ? 1 : -1;\r\n    }\r\n\r\n    // ratio threshold\r\n    let ratio = -delta * this.options.ratioThreshold;\r\n\r\n    // mouse point position relative to stage\r\n    let pointer = {\r\n      x: e.clientX - this.$stage.offset().left + document.documentElement.scrollLeft,\r\n      y: e.clientY - this.$stage.offset().top + document.documentElement.scrollTop\r\n    };\r\n\r\n    this.zoom(ratio, pointer, e);\r\n\r\n  }\r\n\r\n  zoom(ratio, origin, e) {\r\n\r\n    // zoom out ratio & zoom in ratio\r\n    ratio = ratio < 0 ? (1 / (1 - ratio)) : (1 + ratio);\r\n\r\n    // image ratio\r\n    ratio = this.$image.width() / this.imageData.originalWidth * ratio;\r\n\r\n    // Fixed digital error\r\n    // if (ratio > 0.95 && ratio < 1.05) {\r\n    //   ratio = 1;\r\n    // }\r\n\r\n    if (ratio > this.options.maxRatio || ratio < this.options.minRatio) {\r\n      return;\r\n    }\r\n\r\n    this.zoomTo(ratio, origin, e);\r\n\r\n  }\r\n\r\n  zoomTo(ratio, origin, e) {\r\n\r\n    let $image = this.$image,\r\n      $stage = this.$stage,\r\n      imgData = {\r\n        w: this.imageData.width,\r\n        h: this.imageData.height,\r\n        x: this.imageData.left,\r\n        y: this.imageData.top\r\n      };\r\n\r\n    // image stage position\r\n    // We will use it to calc the relative position of image\r\n    let stageData = {\r\n      w: $stage.width(),\r\n      h: $stage.height(),\r\n      x: $stage.offset().left,\r\n      y: $stage.offset().top\r\n    };\r\n\r\n    let newWidth = this.imageData.originalWidth * ratio,\r\n      newHeight = this.imageData.originalHeight * ratio,\r\n      // Think about it for a while\r\n      newLeft = origin.x - (origin.x - imgData.x) / imgData.w * newWidth,\r\n      newTop = origin.y - (origin.y - imgData.y) / imgData.h * newHeight;\r\n\r\n    // Î´ is the difference between image new width and new height\r\n    let Î´ = !this.isRotated ? 0 : (newWidth - newHeight) / 2,\r\n      imgNewWidth = !this.isRotated ? newWidth : newHeight,\r\n      imgNewHeight = !this.isRotated ? newHeight : newWidth;\r\n\r\n    let offsetX = stageData.w - newWidth,\r\n      offsetY = stageData.h - newHeight;\r\n\r\n    // zoom out & zoom in condition\r\n    // It's important and it takes me a lot of time to get it\r\n    // The conditions with image rotate 90 degree drive me crazy alomst!\r\n    if (imgNewHeight <= stageData.h) {\r\n      newTop = (stageData.h - newHeight) / 2;\r\n    } else {\r\n      newTop = newTop > Î´\r\n        ? Î´\r\n        : (newTop > (offsetY - Î´)\r\n          ? newTop\r\n          : (offsetY - Î´));\r\n    }\r\n\r\n    if (imgNewWidth <= stageData.w) {\r\n      newLeft = (stageData.w - newWidth) / 2;\r\n    } else {\r\n      newLeft = newLeft > -Î´\r\n        ? -Î´\r\n        : (newLeft > (offsetX + Î´)\r\n          ? newLeft\r\n          : (offsetX + Î´));\r\n    }\r\n\r\n    // if the image scale get to the critical point\r\n    if (Math.abs(this.imageData.initWidth - newWidth) < this.imageData.initWidth * 0.05) {\r\n      this.setImageSize(this.img);\r\n    } else {\r\n      $image.css({\r\n        width: Math.round(newWidth) + 'px',\r\n        height: Math.round(newHeight) + 'px',\r\n        left: Math.round(newLeft) + 'px',\r\n        top: Math.round(newTop) + 'px'\r\n      });\r\n\r\n      // Set grab cursor\r\n      setGrabCursor(\r\n        {\r\n          w: Math.round(imgNewWidth),\r\n          h: Math.round(imgNewHeight)\r\n        },\r\n        {\r\n          w: stageData.w,\r\n          h: stageData.h\r\n        },\r\n        this.$stage\r\n      );\r\n    }\r\n\r\n\r\n    // Update image initial data\r\n    $.extend(this.imageData, {\r\n      width: newWidth,\r\n      height: newHeight,\r\n      left: newLeft,\r\n      top: newTop\r\n    });\r\n\r\n  }\r\n\r\n  rotate(angle) {\r\n\r\n    this.rotateAngle = this.rotateAngle + angle;\r\n\r\n    if ((this.rotateAngle / 90) % 2 === 0) {\r\n      this.isRotated = false;\r\n    } else {\r\n      this.isRotated = true;\r\n    }\r\n\r\n    this.rotateTo(this.rotateAngle);\r\n\r\n  }\r\n\r\n  rotateTo(angle) {\r\n\r\n    this.$image.css({\r\n      transform: 'rotate(' + angle + 'deg)'\r\n    });\r\n\r\n    this.setImageSize({\r\n      width: this.imageData.originalWidth,\r\n      height: this.imageData.originalHeight\r\n    });\r\n\r\n    // Remove grab cursor when rotate\r\n    this.$stage.removeClass('is-grab');\r\n\r\n  }\r\n\r\n  resize() {\r\n\r\n    let resizeHandler = throttle(() => {\r\n\r\n      if (this.isOpened) {\r\n        if (this.isMaximized) {\r\n          this.setImageSize({\r\n            width: this.imageData.originalWidth,\r\n            height: this.imageData.originalHeight\r\n          });\r\n        } else {\r\n          this.setModalSize({\r\n            width: this.imageData.originalWidth,\r\n            height: this.imageData.originalHeight\r\n          });\r\n        }\r\n      }\r\n\r\n    }, 500);\r\n\r\n    return resizeHandler;\r\n\r\n  }\r\n\r\n  maximize() {\r\n\r\n    if (!this.isMaximized) {\r\n      // Store modal data before maximize\r\n      this.modalData = {\r\n        width: this.$photoviewer.width(),\r\n        height: this.$photoviewer.height(),\r\n        left: this.$photoviewer.offset().left,\r\n        top: this.$photoviewer.offset().top\r\n      };\r\n\r\n      this.$photoviewer.addClass(NS + '-maximize');\r\n\r\n      this.$photoviewer.css({\r\n        width: '100%',\r\n        height: '100%',\r\n        left: 0,\r\n        top: 0\r\n      });\r\n\r\n      this.isMaximized = true;\r\n\r\n    } else {\r\n\r\n      this.$photoviewer.removeClass(NS + '-maximize');\r\n\r\n      this.$photoviewer.css({\r\n        width: this.modalData.width\r\n          ? this.modalData.width\r\n          : this.options.modalWidth,\r\n        height: this.modalData.height\r\n          ? this.modalData.height\r\n          : this.options.modalHeight,\r\n        left: this.modalData.left\r\n          ? this.modalData.left\r\n          : ($W.width() - this.options.modalWidth) / 2 + document.documentElement.scrollLeft,\r\n        top: this.modalData.top\r\n          ? this.modalData.top\r\n          : ($W.height() - this.options.modalHeight) / 2 + document.documentElement.scrollTop\r\n      });\r\n\r\n      this.isMaximized = false;\r\n    }\r\n\r\n    this.setImageSize({\r\n      width: this.imageData.originalWidth,\r\n      height: this.imageData.originalHeight\r\n    });\r\n\r\n  }\r\n\r\n  fullscreen() {\r\n\r\n    requestFullscreen(this.$photoviewer[0]);\r\n\r\n  }\r\n\r\n  keydown(e) {\r\n\r\n    if (!this.options.keyboard) {\r\n      return false;\r\n    }\r\n\r\n    let keyCode = e.keyCode || e.which || e.charCode,\r\n      ctrlKey = e.ctrlKey || e.metaKey,\r\n      altKey = e.altKey || e.metaKey;\r\n\r\n    switch (keyCode) {\r\n      // â†\r\n      case 37:\r\n        this.jump(-1);\r\n        break;\r\n      // â†’\r\n      case 39:\r\n        this.jump(1);\r\n        break;\r\n      // +\r\n      case 187:\r\n        this.zoom(\r\n          this.options.ratioThreshold * 3,\r\n          { x: this.$stage.width() / 2, y: this.$stage.height() / 2 },\r\n          e\r\n        );\r\n        break;\r\n      // -\r\n      case 189:\r\n        this.zoom(\r\n          -this.options.ratioThreshold * 3,\r\n          { x: this.$stage.width() / 2, y: this.$stage.height() / 2 },\r\n          e\r\n        );\r\n        break;\r\n      // + Firefox\r\n      case 61:\r\n        this.zoom(\r\n          this.options.ratioThreshold * 3,\r\n          { x: this.$stage.width() / 2, y: this.$stage.height() / 2 },\r\n          e\r\n        );\r\n        break;\r\n      // - Firefox\r\n      case 173:\r\n        this.zoom(\r\n          -this.options.ratioThreshold * 3,\r\n          { x: this.$stage.width() / 2, y: this.$stage.height() / 2 },\r\n          e\r\n        );\r\n        break;\r\n      // ctrl + alt + 0\r\n      case 48:\r\n        if (ctrlKey && altKey) {\r\n          this.zoomTo(\r\n            1,\r\n            { x: this.$stage.width() / 2, y: this.$stage.height() / 2 },\r\n            e\r\n          );\r\n        }\r\n        break;\r\n      // ctrl + ,\r\n      case 188:\r\n        if (ctrlKey) {\r\n          this.rotate(-90);\r\n        }\r\n        break;\r\n      // ctrl + .\r\n      case 190:\r\n        if (ctrlKey) {\r\n          this.rotate(90);\r\n        }\r\n        break;\r\n      default:\r\n    }\r\n\r\n  }\r\n\r\n  addEvents() {\r\n\r\n    this.$close.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, (e) => {\r\n      this.close();\r\n    });\r\n\r\n    this.$stage.off(WHEEL_EVENT + EVENT_NS).on(WHEEL_EVENT + EVENT_NS, (e) => {\r\n      this.wheel(e);\r\n    });\r\n\r\n    this.$zoomIn.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, (e) => {\r\n      this.zoom(\r\n        this.options.ratioThreshold * 3,\r\n        { x: this.$stage.width() / 2, y: this.$stage.height() / 2 },\r\n        e\r\n      );\r\n    });\r\n\r\n    this.$zoomOut.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, (e) => {\r\n      this.zoom(\r\n        -this.options.ratioThreshold * 3,\r\n        { x: this.$stage.width() / 2, y: this.$stage.height() / 2 },\r\n        e\r\n      );\r\n    });\r\n\r\n    this.$actualSize.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, (e) => {\r\n      this.zoomTo(\r\n        1,\r\n        { x: this.$stage.width() / 2, y: this.$stage.height() / 2 },\r\n        e\r\n      );\r\n    });\r\n\r\n    this.$prev.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, () => {\r\n      this.jump(-1);\r\n    });\r\n\r\n    this.$fullscreen.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, () => {\r\n      this.fullscreen();\r\n    });\r\n\r\n    this.$next.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, () => {\r\n      this.jump(1);\r\n    });\r\n\r\n    this.$rotateLeft.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, () => {\r\n      this.rotate(-90);\r\n    });\r\n\r\n    this.$rotateRight.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, () => {\r\n      this.rotate(90);\r\n    });\r\n\r\n    this.$maximize.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, () => {\r\n      this.maximize();\r\n    });\r\n\r\n    $D.off(KEYDOWN_EVENT + EVENT_NS).on(KEYDOWN_EVENT + EVENT_NS, (e) => {\r\n      this.keydown(e);\r\n    });\r\n\r\n    $W.on(RESIZE_EVENT + EVENT_NS, this.resize());\r\n\r\n  }\r\n\r\n  _triggerHook(e, data) {\r\n    if (this.options.callbacks[e]) {\r\n      this.options.callbacks[e].apply(this, $.isArray(data) ? data : [data]);\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\n/**\r\n * Add methods to PhotoViewer\r\n */\r\n$.extend(PhotoViewer.prototype, draggable, movable, resizable);\r\n\r\n/**\r\n * Add PhotoViewer to globle\r\n */\r\nwindow.PhotoViewer = PhotoViewer;\r\n\r\n/**\r\n * jQuery plugin\r\n */\r\n\r\nlet jqEl = null,\r\n  getImgGroup = function (list, groupName) {\r\n\r\n    let items = [];\r\n\r\n    $(list).each(function () {\r\n\r\n      let src = getImgSrc(this);\r\n\r\n      items.push({\r\n        src: src,\r\n        title: $(this).attr('data-title'),\r\n        groupName: groupName\r\n      });\r\n\r\n    });\r\n\r\n    return items;\r\n\r\n  }\r\n\r\n$.fn.photoviewer = function (options) {\r\n\r\n  jqEl = $(this);\r\n\r\n  options = options ? options : {};\r\n\r\n  // Convert a numeric string into a number\r\n  for (let key in options) {\r\n    if (typeof (options[key]) === 'string' && !isNaN(options[key])) {\r\n      options[key] = parseFloat(options[key])\r\n    }\r\n  }\r\n\r\n  // Get init event, 'click' or 'dblclick'\r\n  let opts = $.extend(true, {}, DEFAULTS, options);\r\n\r\n  // We should get zIndex of options before plugin's init.\r\n  PUBLIC_VARS['zIndex'] = opts.zIndex;\r\n\r\n  if (typeof options === 'string') {\r\n\r\n    // $(this).data('photoviewer')[options]();\r\n\r\n  } else {\r\n\r\n    jqEl.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, function (e) {\r\n\r\n      e.preventDefault();\r\n      // This will stop triggering data-api event\r\n      e.stopPropagation();\r\n\r\n      // Get image group\r\n      let items = [],\r\n        currentGroupName = $(this).attr('data-group'),\r\n        groupList = $D.find('[data-group=\"' + currentGroupName + '\"]');\r\n\r\n      if (currentGroupName !== undefined) {\r\n        items = getImgGroup(groupList, currentGroupName);\r\n        options['index'] = $(this).index('[data-group=\"' + currentGroupName + '\"]');\r\n      } else {\r\n        items = getImgGroup(jqEl.not('[data-group]'));\r\n        options['index'] = $(this).index();\r\n      }\r\n\r\n      $(this).data(NS, new PhotoViewer(items, options, this));\r\n\r\n    });\r\n\r\n  }\r\n\r\n  return jqEl;\r\n\r\n};\r\n\r\n/**\r\n * PhotoViewer DATA-API\r\n */\r\n$D.on(CLICK_EVENT + EVENT_NS, '[data-' + NS + ']', function (e) {\r\n\r\n  jqEl = $('[data-' + NS + ']');\r\n\r\n  e.preventDefault();\r\n\r\n  // Get image group\r\n  let items = [],\r\n    currentGroupName = $(this).attr('data-group'),\r\n    groupList = $D.find('[data-group=\"' + currentGroupName + '\"]');\r\n\r\n  if (currentGroupName !== undefined) {\r\n    items = getImgGroup(groupList, currentGroupName);\r\n    DEFAULTS['index'] = $(this).index('[data-group=\"' + currentGroupName + '\"]');\r\n  } else {\r\n    items = getImgGroup(jqEl.not('[data-group]'));\r\n    DEFAULTS['index'] = $(this).index();\r\n  }\r\n\r\n  $(this).data(NS, new PhotoViewer(items, DEFAULTS, this));\r\n\r\n});\r\n\r\nexport default PhotoViewer;\r\n"],"names":["D","selector","context","fn","init","emptyArray","concat","filter","slice","document","window","elementDisplay","classCache","cssNumber","fragmentRE","singleTagRE","tagExpanderRE","rootNodeRE","capitalRE","methodAttributes","adjacencyOperators","dimensions","table","createElement","tableRow","containers","simpleSelectorRE","class2type","toString","tempParent","propMap","isArray","Array","arg","Object","prototype","call","handlers","specialEvents","click","mousedown","mouseup","mousemove","focusinSupported","focus","blur","hover","mouseenter","mouseleave","ignoreProperties","eventMethods","preventDefault","stopImmediatePropagation","stopPropagation","type","obj","String","isFunction","value","isWindow","isDocument","nodeType","DOCUMENT_NODE","isObject","isPlainObject","getPrototypeOf","likeArray","length","typeRes","compact","array","item","flatten","apply","dasherize","str","replace","toLowerCase","maybeAddPx","name","uniq","idx","indexOf","camelize","match","chr","toUpperCase","classRE","RegExp","defaultDisplay","nodeName","element","display","body","appendChild","getComputedStyle","getPropertyValue","parentNode","removeChild","children","map","childNodes","node","deserializeValue","test","JSON","parse","e","filtered","nodes","funcArg","payload","setAttribute","removeAttribute","className","klass","svg","baseVal","undefined","isString","returnTrue","returnFalse","constuctor","forEach","reduce","push","sort","splice","dom","trim","fragment","$1","find","qsa","ready","isD","makeArray","extend","options","src","copy","copyIsArray","clone","target","arguments","i","deep","camelCase","isEmptyObject","isNumeric","val","num","Number","isNaN","isFinite","inArray","elem","noop","elements","callback","values","key","each","grep","contains","documentElement","parent","me","len","html","properties","container","innerHTML","attr","found","maybeID","maybeClass","nameOnly","isSimple","getElementById","getElementsByClassName","getElementsByTagName","querySelectorAll","object","matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","oMatchesSelector","temp","split","args","toArray","pluck","property","el","not","excludes","is","has","size","eq","first","last","result","$this","some","add","contents","contentDocument","closest","collection","_","parents","ancestors","siblings","child","offsetParent","css","prev","next","getAttribute","removeAttr","attribute","prop","removeProp","multiple","selected","hasClass","addClass","classList","cls","newName","join","removeClass","toggleClass","when","names","originHtml","empty","append","text","newText","textContent","style","props","computedStyle","removeProperty","cssText","offset","coordinates","index","coords","parentOffset","top","left","getBoundingClientRect","pageXOffset","pageYOffset","width","Math","round","height","position","parseFloat","scrollTop","hasScrollTop","scrollTo","scrollX","scrollLeft","hasScrollLeft","scrollY","remove","cloneNode","wrap","structure","func","get","wrapAll","before","wrapInner","self","unwrap","replaceWith","newContent","every","readyState","doScroll","setTimeout","handler","removeEventListener","addEventListener","data","attrName","show","hide","dimension","dimensionProperty","m","traverseNode","operator","operatorIndex","inside","argType","arr","copyByClone","nextSibling","firstChild","parentInDocument","insertBefore","ownerDocument","defaultView","_zid","zid","findHandlers","event","ns","matcher","matcherFor","sel","parts","eventCapture","captureSetting","del","realEvent","events","delegator","capture","id","set","related","relatedTarget","proxy","compatible","isImmediatePropagationStopped","_args","source","isDefaultPrevented","predicate","sourceMethod","timeStamp","Date","now","ignored","defaultPrevented","returnValue","getPreventDefault","createProxy","originalEvent","Event","createEvent","bubbles","initEvent","proxyFn","unshift","TypeError","one","on","autoRemove","evt","currentTarget","liveFired","off","trigger","dispatchEvent","triggerHandler","draggable","resizable","movable","keyboard","title","modalWidth","modalHeight","fixedContent","fixedModalSize","initMaximized","gapThreshold","ratioThreshold","minRatio","maxRatio","headToolbar","footToolbar","icons","minimize","maximize","close","zoomIn","zoomOut","fullscreen","actualSize","rotateLeft","rotateRight","i18n","multiInstances","initAnimation","fixedModalPos","zIndex","dragHandle","callbacks","beforeOpen","$","opened","beforeClose","closed","beforeChange","changed","progressiveLoading","getImgSrc","throttle","delay","timer","clearTimeout","preloadImg","success","error","img","Image","onload","onerror","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","getImageNameFromUrl","url","reg","txt","getNumFromCSSValue","hasScrollbar","scrollHeight","innerHeight","clientHeight","getScrollbarWidth","scrollDiv","scrollbarWidth","offsetWidth","clientWidth","setGrabCursor","imageData","stageData","stage","isRotated","imageWidth","w","h","imageHeight","supportTouch","DocumentTouch","$W","$D","CLICK_EVENT","RESIZE_EVENT","KEYDOWN_EVENT","WHEEL_EVENT","TOUCH_START_EVENT","TOUCH_MOVE_EVENT","TOUCH_END_EVENT","NS","CLASS_NS","EVENT_NS","PUBLIC_VARS","isMoving","isResizing","defaults","modal","dragCancel","isDragging","startX","startY","dragStart","elemCancel","targetTouches","pageX","clientX","pageY","clientY","dragMove","dragEnd","isMaximized","endX","endY","relativeX","relativeY","ELEMS_WITH_GRABBING_CURSOR","image","widthDiff","heightDiff","Î´","stageWidth","stageHeight","newLeft","newTop","ELEMS_WITH_RESIZE_CURSOR","minWidth","minHeight","resizableHandleE","resizableHandleW","resizableHandleS","resizableHandleN","resizableHandleSE","resizableHandleSW","resizableHandleNE","resizableHandleNW","resizableHandles","modalData","l","t","imgWidth","imgHeight","direction","getModalOpts","dir","offsetX","offsetY","modalLeft","modalTop","opts","max","getImageOpts","widthDiff2","heightDiff2","imgLeft","imgTop","imgLeft2","imgTop2","modalOpts","imageOpts","isDoResize","scale","getImageScaleToStage","initWidth","initHeight","initLeft","initTop","handle","PhotoViewer","items","DEFAULTS","$el","isOpened","rotateAngle","groupData","groupIndex","imgSrc","open","loadImg","$photoviewer","$stage","$image","_creatBtns","toolbar","btns","btnsStr","_creatTitle","_creatDOM","btnsTpl","photoviewerHTML","build","$header","$headToolbar","$footer","$footToolbar","$title","$close","$maximize","$minimize","$zoomIn","$zoomOut","$actualSize","$fullscreen","$rotateLeft","$rotateRight","$prev","$next","_triggerHook","addEvents","setModalPos","zeroModal","winWidth","winHeight","setModalSize","stageCSS","right","bottom","borderLeft","borderRight","borderTop","borderBottom","min","modalCSSObj","animate","setImageSize","ceil","fadeIn","err","loaderHTML","originalWidth","originalHeight","setImgTitle","jump","step","jumpTo","wheel","delta","deltaY","wheelDelta","detail","ratio","pointer","x","y","zoom","origin","zoomTo","imgData","newWidth","newHeight","imgNewWidth","imgNewHeight","abs","rotate","angle","rotateTo","transform","resize","resizeHandler","keydown","keyCode","which","charCode","ctrlKey","metaKey","altKey","jqEl","getImgGroup","list","groupName","photoviewer","currentGroupName","groupList"],"mappings":"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"}